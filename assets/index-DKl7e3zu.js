var Mn=Object.defineProperty;var On=(e,t,n)=>t in e?Mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var x=(e,t,n)=>On(e,typeof t!="symbol"?t+"":t,n);import{E as oe,N as Rn,D as Ln,C as Y,R as ce,P as nt,a as ue,g as Nn,I as Hn,H as N,b as Ce,c as He,V as re,S as it,d as K,e as z,f as Qt,h as he,i as Jt,L as Yt,j as We,k as Ze,l as Kt,m as ke,n as Bn,M as Fn,o as zn,T as qt,K as Vn,p as $n,G as Un,q as Gn,Q as ft,r as ot,s as jn,t as _t,u as en,v as Wn,A as tn,w as nn,x as Zn,y as Xn,z as Qn,B as Jn,F as mt,J as Yn,O as Kn}from"./cesium-Bjn-a5lm.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Be,C,on,le,gt,sn,rn,an,st,Xe,Qe,ln,ye={},cn=[],qn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Fe=Array.isArray;function ie(e,t){for(var n in t)e[n]=t[n];return e}function rt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Je(e,t,n){var i,o,s,r={};for(s in t)s=="key"?i=t[s]:s=="ref"?o=t[s]:r[s]=t[s];if(arguments.length>2&&(r.children=arguments.length>3?Be.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)r[s]===void 0&&(r[s]=e.defaultProps[s]);return Se(e,r,i,o,null)}function Se(e,t,n,i,o){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++on,__i:-1,__u:0};return o==null&&C.vnode!=null&&C.vnode(s),s}function G(e){return e.children}function q(e,t){this.props=e,this.context=t}function me(e,t){if(t==null)return e.__?me(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?me(e):null}function dn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return dn(e)}}function Ye(e){(!e.__d&&(e.__d=!0)&&le.push(e)&&!Oe.__r++||gt!==C.debounceRendering)&&((gt=C.debounceRendering)||sn)(Oe)}function Oe(){for(var e,t,n,i,o,s,r,l=1;le.length;)le.length>l&&le.sort(rn),e=le.shift(),l=le.length,e.__d&&(n=void 0,o=(i=(t=e).__v).__e,s=[],r=[],t.__P&&((n=ie({},i)).__v=i.__v+1,C.vnode&&C.vnode(n),at(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,s,o??me(i),!!(32&i.__u),r),n.__v=i.__v,n.__.__k[n.__i]=n,hn(s,n,r),n.__e!=o&&dn(n)));Oe.__r=0}function un(e,t,n,i,o,s,r,l,u,c,p){var d,f,_,m,b,g,v=i&&i.__k||cn,w=t.length;for(u=ei(n,t,v,u,w),d=0;d<w;d++)(_=n.__k[d])!=null&&(f=_.__i===-1?ye:v[_.__i]||ye,_.__i=d,g=at(e,_,f,o,s,r,l,u,c,p),m=_.__e,_.ref&&f.ref!=_.ref&&(f.ref&&lt(f.ref,null,_),p.push(_.ref,_.__c||m,_)),b==null&&m!=null&&(b=m),4&_.__u||f.__k===_.__k?u=pn(_,u,e):typeof _.type=="function"&&g!==void 0?u=g:m&&(u=m.nextSibling),_.__u&=-7);return n.__e=b,u}function ei(e,t,n,i,o){var s,r,l,u,c,p=n.length,d=p,f=0;for(e.__k=new Array(o),s=0;s<o;s++)(r=t[s])!=null&&typeof r!="boolean"&&typeof r!="function"?(u=s+f,(r=e.__k[s]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Se(null,r,null,null,null):Fe(r)?Se(G,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Se(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,l=null,(c=r.__i=ti(r,n,u,d))!==-1&&(d--,(l=n[c])&&(l.__u|=2)),l==null||l.__v===null?(c==-1&&f--,typeof r.type!="function"&&(r.__u|=4)):c!=u&&(c==u-1?f--:c==u+1?f++:(c>u?f--:f++,r.__u|=4))):e.__k[s]=null;if(d)for(s=0;s<p;s++)(l=n[s])!=null&&!(2&l.__u)&&(l.__e==i&&(i=me(l)),fn(l,l));return i}function pn(e,t,n){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=pn(i[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=me(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Re(e,t){return t=t||[],e==null||typeof e=="boolean"||(Fe(e)?e.some(function(n){Re(n,t)}):t.push(e)),t}function ti(e,t,n,i){var o,s,r=e.key,l=e.type,u=t[n];if(u===null||u&&r==u.key&&l===u.type&&!(2&u.__u))return n;if(i>(u!=null&&!(2&u.__u)?1:0))for(o=n-1,s=n+1;o>=0||s<t.length;){if(o>=0){if((u=t[o])&&!(2&u.__u)&&r==u.key&&l===u.type)return o;o--}if(s<t.length){if((u=t[s])&&!(2&u.__u)&&r==u.key&&l===u.type)return s;s++}}return-1}function vt(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||qn.test(t)?n:n+"px"}function Ie(e,t,n,i,o){var s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||vt(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||vt(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(an,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i?n.u=i.u:(n.u=st,e.addEventListener(t,s?Qe:Xe,s)):e.removeEventListener(t,s?Qe:Xe,s);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function wt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=st++;else if(t.t<n.u)return;return n(C.event?C.event(t):t)}}}function at(e,t,n,i,o,s,r,l,u,c){var p,d,f,_,m,b,g,v,w,I,M,X,H,j,W,B,F,te,T=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),s=[l=t.__e=n.__e]),(p=C.__b)&&p(t);e:if(typeof T=="function")try{if(v=t.props,w="prototype"in T&&T.prototype.render,I=(p=T.contextType)&&i[p.__c],M=p?I?I.props.value:p.__:i,n.__c?g=(d=t.__c=n.__c).__=d.__E:(w?t.__c=d=new T(v,M):(t.__c=d=new q(v,M),d.constructor=T,d.render=ii),I&&I.sub(d),d.props=v,d.state||(d.state={}),d.context=M,d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),w&&d.__s==null&&(d.__s=d.state),w&&T.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=ie({},d.__s)),ie(d.__s,T.getDerivedStateFromProps(v,d.__s))),_=d.props,m=d.state,d.__v=t,f)w&&T.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),w&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(w&&T.getDerivedStateFromProps==null&&v!==_&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(v,M),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(v,d.__s,M)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(d.props=v,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function($){$&&($.__=t)}),X=0;X<d._sb.length;X++)d.__h.push(d._sb[X]);d._sb=[],d.__h.length&&r.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(v,d.__s,M),w&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(_,m,b)})}if(d.context=M,d.props=v,d.__P=e,d.__e=!1,H=C.__r,j=0,w){for(d.state=d.__s,d.__d=!1,H&&H(t),p=d.render(d.props,d.state,d.context),W=0;W<d._sb.length;W++)d.__h.push(d._sb[W]);d._sb=[]}else do d.__d=!1,H&&H(t),p=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++j<25);d.state=d.__s,d.getChildContext!=null&&(i=ie(ie({},i),d.getChildContext())),w&&!f&&d.getSnapshotBeforeUpdate!=null&&(b=d.getSnapshotBeforeUpdate(_,m)),F=(B=p!=null&&p.type===G&&p.key==null)?p.props.children:p,B&&(p.props.children=null),l=un(e,Fe(F)?F:[F],t,n,i,o,s,r,l,u,c),d.base=t.__e,t.__u&=-161,d.__h.length&&r.push(d),g&&(d.__E=d.__=null)}catch($){if(t.__v=null,u||s!=null)if($.then){for(t.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,t.__e=l}else for(te=s.length;te--;)rt(s[te]);else t.__e=n.__e,t.__k=n.__k;C.__e($,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=ni(n.__e,t,n,i,o,s,r,u,c);return(p=C.diffed)&&p(t),128&t.__u?void 0:l}function hn(e,t,n){for(var i=0;i<n.length;i++)lt(n[i],n[++i],n[++i]);C.__c&&C.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){C.__e(s,o.__v)}})}function ni(e,t,n,i,o,s,r,l,u){var c,p,d,f,_,m,b,g=n.props,v=t.props,w=t.type;if(w=="svg"?o="http://www.w3.org/2000/svg":w=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((_=s[c])&&"setAttribute"in _==!!w&&(w?_.localName==w:_.nodeType==3)){e=_,s[c]=null;break}}if(e==null){if(w==null)return document.createTextNode(v);e=document.createElementNS(o,w,v.is&&v),l&&(C.__m&&C.__m(t,s),l=!1),s=null}if(w===null)g===v||l&&e.data===v||(e.data=v);else{if(s=s&&Be.call(e.childNodes),g=n.props||ye,!l&&s!=null)for(g={},c=0;c<e.attributes.length;c++)g[(_=e.attributes[c]).name]=_.value;for(c in g)if(_=g[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=_;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;Ie(e,c,null,_,o)}}for(c in v)_=v[c],c=="children"?f=_:c=="dangerouslySetInnerHTML"?p=_:c=="value"?m=_:c=="checked"?b=_:l&&typeof _!="function"||g[c]===_||Ie(e,c,_,g[c],o);if(p)l||d&&(p.__html===d.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(d&&(e.innerHTML=""),un(t.type==="template"?e.content:e,Fe(f)?f:[f],t,n,i,w=="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,r,s?s[0]:n.__k&&me(n,0),l,u),s!=null)for(c=s.length;c--;)rt(s[c]);l||(c="value",w=="progress"&&m==null?e.removeAttribute("value"):m!==void 0&&(m!==e[c]||w=="progress"&&!m||w=="option"&&m!==g[c])&&Ie(e,c,m,g[c],o),c="checked",b!==void 0&&b!==e[c]&&Ie(e,c,b,g[c],o))}return e}function lt(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(o){C.__e(o,n)}}function fn(e,t,n){var i,o;if(C.unmount&&C.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||lt(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){C.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&fn(i[o],t,n||typeof e.type!="function");n||rt(e.__e),e.__c=e.__=e.__e=void 0}function ii(e,t,n){return this.constructor(e,n)}function oi(e,t,n){var i,o,s,r;t==document&&(t=document.documentElement),C.__&&C.__(e,t),o=(i=!1)?null:t.__k,s=[],r=[],at(t,e=t.__k=Je(G,null,[e]),o||ye,ye,t.namespaceURI,o?null:t.firstChild?Be.call(t.childNodes):null,s,o?o.__e:t.firstChild,i,r),hn(s,e,r)}function ct(e){function t(n){var i,o;return this.getChildContext||(i=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&i.forEach(function(r){r.__e=!0,Ye(r)})},this.sub=function(s){i.add(s);var r=s.componentWillUnmount;s.componentWillUnmount=function(){i&&i.delete(s),r&&r.call(s)}}),n.children}return t.__c="__cC"+ln++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,i){return n.children(i)}).contextType=t,t}Be=cn.slice,C={__e:function(e,t,n,i){for(var o,s,r;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),r=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),r=o.__d),r)return o.__E=o}catch(l){e=l}throw e}},on=0,q.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ie({},this.state),typeof e=="function"&&(e=e(ie({},n),this.props)),e&&ie(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ye(this))},q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ye(this))},q.prototype.render=G,le=[],sn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rn=function(e,t){return e.__v.__b-t.__v.__b},Oe.__r=0,an=/(PointerCapture)$|Capture$/i,st=0,Xe=wt(!1),Qe=wt(!0),ln=0;var si=0;function a(e,t,n,i,o,s){t||(t={});var r,l,u=t;if("ref"in u)for(l in u={},t)l=="ref"?r=t[l]:u[l]=t[l];var c={type:e,props:u,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--si,__i:-1,__u:0,__source:o,__self:s};if(typeof e=="function"&&(r=e.defaultProps))for(l in r)u[l]===void 0&&(u[l]=r[l]);return C.vnode&&C.vnode(c),c}var ge,D,Ue,yt,be=0,_n=[],O=C,bt=O.__b,Ct=O.__r,kt=O.diffed,At=O.__c,Pt=O.unmount,xt=O.__;function ze(e,t){O.__h&&O.__h(D,e,be||t),be=0;var n=D.__H||(D.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function P(e){return be=1,ri(gn,e)}function ri(e,t,n){var i=ze(ge++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):gn(void 0,t),function(l){var u=i.__N?i.__N[0]:i.__[0],c=i.t(u,l);u!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=D,!D.__f)){var o=function(l,u,c){if(!i.__c.__H)return!0;var p=i.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!s||s.call(this,l,u,c);var d=i.__c.props!==l;return p.forEach(function(f){if(f.__N){var _=f.__[0];f.__=f.__N,f.__N=void 0,_!==f.__[0]&&(d=!0)}}),s&&s.call(this,l,u,c)||d};D.__f=!0;var s=D.shouldComponentUpdate,r=D.componentWillUpdate;D.componentWillUpdate=function(l,u,c){if(this.__e){var p=s;s=void 0,o(l,u,c),s=p}r&&r.call(this,l,u,c)},D.shouldComponentUpdate=o}return i.__N||i.__}function J(e,t){var n=ze(ge++,3);!O.__s&&mn(n.__H,t)&&(n.__=e,n.u=t,D.__H.__h.push(n))}function ae(e){return be=5,dt(function(){return{current:e}},[])}function dt(e,t){var n=ze(ge++,7);return mn(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function y(e,t){return be=8,dt(function(){return e},t)}function V(e){var t=D.context[e.__c],n=ze(ge++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(D)),t.props.value):e.__}function ai(){for(var e;e=_n.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Te),e.__H.__h.forEach(Ke),e.__H.__h=[]}catch(t){e.__H.__h=[],O.__e(t,e.__v)}}O.__b=function(e){D=null,bt&&bt(e)},O.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),xt&&xt(e,t)},O.__r=function(e){Ct&&Ct(e),ge=0;var t=(D=e.__c).__H;t&&(Ue===D?(t.__h=[],D.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Te),t.__h.forEach(Ke),t.__h=[],ge=0)),Ue=D},O.diffed=function(e){kt&&kt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(_n.push(t)!==1&&yt===O.requestAnimationFrame||((yt=O.requestAnimationFrame)||li)(ai)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ue=D=null},O.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Te),n.__h=n.__h.filter(function(i){return!i.__||Ke(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],O.__e(i,n.__v)}}),At&&At(e,t)},O.unmount=function(e){Pt&&Pt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Te(i)}catch(o){t=o}}),n.__H=void 0,t&&O.__e(t,n.__v))};var It=typeof requestAnimationFrame=="function";function li(e){var t,n=function(){clearTimeout(i),It&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);It&&(t=requestAnimationFrame(n))}function Te(e){var t=D,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),D=t}function Ke(e){var t=D;e.__c=e.__(),D=t}function mn(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function gn(e,t){return typeof t=="function"?t(e):t}function ci({entity:e,selectEntity:t}){const n=V(ee),i=ae(o=>{});return i.current=y(o=>{o&&o instanceof oe&&(!e&&o||(e==null?void 0:e.id)!==(o==null?void 0:o.id))&&t&&t(o)},[e,t]),J(()=>{const o=i.current;if(n&&o)return n.selectedEntityChanged.addEventListener(o),()=>{n.selectedEntityChanged.removeEventListener(o)}},[n,i]),J(()=>{n&&e instanceof oe&&(n.selectedEntity=e)},[n,e]),a(G,{})}const qe=["billboard","label","polyline","polygon","model"],di={size:2,targetClass:Ln,componentNames:["Near distance (m)","Far distance (m)"]},ui={size:4,targetClass:Rn,componentNames:["Near distance (m)","Near value","Far distance (m)","Far value"]},Dt=`
NONE - The position is absolute.
CLAMP_TO_GROUND - The position is clamped to the terrain and 3D Tiles.
RELATIVE_TO_GROUND - The position height is the height above the terrain and 3D Tiles.
CLAMP_TO_TERRAIN - The position is clamped to terain.
RELATIVE_TO_TERRAIN - The position height is the height above terrain.
CLAMP_TO_3D_TILE - The position is clamped to 3D Tiles.
RELATIVE_TO_3D_TILE - The position height is the height above 3D Tiles.
`,S=(...e)=>e.filter(t=>!!t).join(" "),pi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='16.0px'%20height='16.0px'%20viewBox='0%200%2016.0%2016.0'%20version='1.1'%20id='SVGRoot'%20sodipodi:docname='billboard.svg'%20inkscape:version='1.1.2%20(0a00cf5339,%202022-02-04)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview1483'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:document-units='px'%20showgrid='true'%20inkscape:zoom='49.659708'%20inkscape:cx='12.404423'%20inkscape:cy='8.7998906'%20inkscape:window-width='2560'%20inkscape:window-height='1384'%20inkscape:window-x='1440'%20inkscape:window-y='666'%20inkscape:window-maximized='1'%20inkscape:current-layer='layer1'%3e%3cinkscape:grid%20type='xygrid'%20id='grid1546'%20spacingx='0.1'%20spacingy='0.1'%20empspacing='5'%20/%3e%3c/sodipodi:namedview%3e%3cdefs%20id='defs1478'%20/%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%3e%3cellipse%20style='fill:%23333333;stroke:none;stroke-width:0.340157;stroke-linejoin:bevel'%20id='path9503'%20cx='7.9963527'%20cy='14.212624'%20rx='1.5'%20ry='1'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='M%208,12.5%20C%207,9.5%204.3178787,7.2805356%204.3178787,5.2805356%204.3178787,3.2805356%205.8474697,0.98415641%208,1%2010.127439,1.0156589%2011.5015,3.2738716%2011.5015,5.2738716%2011.5015,7.2738716%209,9.5%208,12.5%20Z'%20id='path1684'%20sodipodi:nodetypes='cscsc'%20/%3e%3c/g%3e%3c/svg%3e",hi="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMTYuMHB4IgogICBoZWlnaHQ9IjE2LjBweCIKICAgdmlld0JveD0iMCAwIDE2LjAgMTYuMCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0iU1ZHUm9vdCIKICAgc29kaXBvZGk6ZG9jbmFtZT0ibGFiZWwuc3ZnIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjEuMiAoMGEwMGNmNTMzOSwgMjAyMi0wMi0wNCkiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJuYW1lZHZpZXcxMDYyIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOnpvb209IjQ5LjY1OTcwOCIKICAgICBpbmtzY2FwZTpjeD0iNy4wODgyNDE0IgogICAgIGlua3NjYXBlOmN5PSI3Ljk1NDEzNDYiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIyNTYwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEzODQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjE0NDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjY2NiIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgaWQ9ImdyaWQxMTI1IiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxMDU3IiAvPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxlbGxpcHNlCiAgICAgICBzdHlsZT0iZmlsbDojMzMzMzMzO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDowLjM0MDE1NztzdHJva2UtbGluZWpvaW46YmV2ZWwiCiAgICAgICBpZD0icGF0aDk1MDMiCiAgICAgICBjeD0iNy45NDE2ODM4IgogICAgICAgY3k9IjEzLjcxNDEzMSIKICAgICAgIHJ4PSIxLjUiCiAgICAgICByeT0iMSIgLz4KICAgIDx0ZXh0CiAgICAgICB4bWw6c3BhY2U9InByZXNlcnZlIgogICAgICAgc3R5bGU9ImZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6MTMuMzMzM3B4O2xpbmUtaGVpZ2h0OjEuMjU7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjtsZXR0ZXItc3BhY2luZzowcHg7d29yZC1zcGFjaW5nOjBweDtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiCiAgICAgICB4PSIzLjQ0NzUwMTIiCiAgICAgICB5PSIxMi4wMjkwMzgiCiAgICAgICBpZD0idGV4dDExNDA5Ij48dHNwYW4KICAgICAgICAgc29kaXBvZGk6cm9sZT0ibGluZSIKICAgICAgICAgaWQ9InRzcGFuMTE0MDciCiAgICAgICAgIHg9IjMuNDQ3NTAxMiIKICAgICAgICAgeT0iMTIuMDI5MDM4IgogICAgICAgICBzdHlsZT0iZm9udC1zaXplOjEzLjMzMzNweDtmaWxsOiMwMDAwMDA7c3Ryb2tlOm5vbmUiPkE8L3RzcGFuPjwvdGV4dD4KICA8L2c+Cjwvc3ZnPgo=",fi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20version='1.1'%20id='svg5'%20inkscape:version='1.1.2%20(0a00cf5339,%202022-02-04)'%20sodipodi:docname='polygon.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview7'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:document-units='px'%20showgrid='false'%20inkscape:zoom='54.4375'%20inkscape:cx='1.836969'%20inkscape:cy='7.9908152'%20inkscape:window-width='2560'%20inkscape:window-height='1384'%20inkscape:window-x='1440'%20inkscape:window-y='666'%20inkscape:window-maximized='1'%20inkscape:current-layer='layer1'%20/%3e%3cdefs%20id='defs2'%20/%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='M%209.4515687,13.081606%204.4926539,11.101318%202.2176916,8.0960731%206.5258189,2.8389826%2012.701928,4.6645827%209.2401425,7.8603527%2012.400258,9.8336122%20Z'%20id='path857'%20sodipodi:nodetypes='cccccccc'%20/%3e%3c/g%3e%3c/svg%3e",_i="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='16.0px'%20height='16.0px'%20viewBox='0%200%2016.0%2016.0'%20version='1.1'%20id='SVGRoot'%20sodipodi:docname='polyline.svg'%20inkscape:version='1.1.2%20(0a00cf5339,%202022-02-04)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview5909'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:document-units='px'%20showgrid='true'%20inkscape:zoom='49.659708'%20inkscape:cx='8.3166015'%20inkscape:cy='8.3971497'%20inkscape:window-width='2560'%20inkscape:window-height='1384'%20inkscape:window-x='1440'%20inkscape:window-y='666'%20inkscape:window-maximized='1'%20inkscape:current-layer='layer1'%3e%3cinkscape:grid%20type='xygrid'%20id='grid5972'%20/%3e%3c/sodipodi:namedview%3e%3cdefs%20id='defs5904'%20/%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:bevel;stroke-opacity:1'%20d='M%201,15%206,3%208,12%2013,1'%20id='path8505'%20sodipodi:nodetypes='cccc'%20/%3e%3c/g%3e%3c/svg%3e",mi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='16.0px'%20height='16.0px'%20viewBox='0%200%2016.0%2016.0'%20version='1.1'%20id='SVGRoot'%20sodipodi:docname='folder.svg'%20inkscape:version='1.1.2%20(0a00cf5339,%202022-02-04)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview49180'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:document-units='px'%20showgrid='true'%20inkscape:zoom='49.659708'%20inkscape:cx='7.2493378'%20inkscape:cy='6.7056375'%20inkscape:window-width='2560'%20inkscape:window-height='1384'%20inkscape:window-x='1440'%20inkscape:window-y='666'%20inkscape:window-maximized='1'%20inkscape:current-layer='layer1'%3e%3cinkscape:grid%20type='xygrid'%20id='grid49243'%20spacingx='0.1'%20spacingy='0.1'%20/%3e%3c/sodipodi:namedview%3e%3cdefs%20id='defs49175'%20/%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%3e%3cpath%20style='fill:%23666666;stroke:%23000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='M%2015,14%20H%201%20V%202.5%20H%206%20L%207,5%20h%208%20z'%20id='path49823'%20/%3e%3c/g%3e%3c/svg%3e",gi={billboard:pi,label:hi,polygon:fi,polyline:_i,folder:mi};function vi({entity:e,selectedEntity:t,entities:n,typeStatistics:i,selectEntity:o}){const s=ae(null),r=qe.find(f=>e[f]!==void 0),l=r===void 0&&n.some(f=>{var _;return((_=f.parent)==null?void 0:_.id)===e.id}),u=r!==void 0?i[r]:0,c=e.name||`${r} ${u}`,p=t===e,d=y(()=>{o&&!l&&o(e)},[e,o,l]);return p&&s.current&&s.current.scrollIntoView({block:"nearest"}),a("div",{ref:s,class:S("entity",p&&"selected"),onClick:d,children:[a(wi,{type:l?"folder":r}),a("span",{children:" "}),a("span",{class:"entity-title",children:c})]},e.id)}function wi({type:e}){const t=e&&gi[e];return a("span",{class:"entity-type",children:a("img",{alt:e,src:t})})}function ut({visible:e,children:t,className:n}){return a("div",{class:S(n,"modal",e&&"visible"),children:a("div",{class:"content",children:t})})}function yi({entities:e,onClose:t}){const n=new Set;e.forEach(c=>{var p;return(p=c.properties)==null?void 0:p.propertyNames.forEach(d=>n.add(d))});const i=Array.from(n),[o,s]=P([]),r=y(c=>{const d=e.map(v=>{var w;return(w=v.properties)==null?void 0:w.getValue()[c]}),f=[Number.MAX_VALUE,Number.MIN_VALUE];d.forEach(v=>{f[0]=Math.min(v,f[0]),f[1]=Math.max(v,f[1])});const[_,m]=f,b=(m-_)/9,g=d.map(v=>Math.floor((_+v)/b));s(g)},[e,s]),l=a("thead",{children:a("tr",{children:[a("th",{children:"Name"}),o.length>0&&a("th",{children:"Bucket"}),i.map(c=>a("th",{children:[c,a("button",{onClick:r.bind(void 0,c),children:"Histogram"})]},c))]})}),u=e.map((c,p)=>a("tr",{children:[a("td",{children:c.name},"name"),o.length>0&&a("td",{children:o[p]},"bucket"),i.map(d=>{var f;return a("td",{children:((f=c.properties)==null?void 0:f.getValue()[d])||""},d)})]}));return window.entities=e,a(ut,{visible:!0,className:"data-table",children:[a("div",{class:"actions",children:a("button",{onClick:()=>t&&t(),children:"Close"})}),a("div",{class:"scroll",children:a("table",{children:[l,a("tbody",{children:u})]})})]})}function bi({entities:e,entity:t,selectEntity:n}){const i={};qe.forEach(l=>i[l]=0),e.forEach(l=>{const u=qe.find(c=>l[c]!==void 0);u&&(i[u]+=1)});const[o,s]=P(!1),r=e.map(l=>a(vi,{entity:l,selectedEntity:t,entities:e,typeStatistics:i,selectEntity:n},l.id));return a("div",{id:"entity-list",class:"section entities-list-section",children:[a("h3",{children:"Entities"}),o&&a(yi,{entities:e,onClose:()=>{s(!1)}}),a("div",{class:"entities-actions button-size-s",children:a("button",{onClick:()=>{s(!0)},children:"Data table"})}),a("div",{class:"scroll-container",children:r}),a(ci,{entity:t,selectEntity:n},`${t==null?void 0:t.id}.selection-sync`)]})}function Ci(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}var ki=0;function de({label:e,value:t,className:n,onChange:i}){const o="input-"+ki++,s=y(r=>{i&&i(r.target.value)},[i]);return a("div",{class:S("input-container","generic",n),children:[a("input",{type:"text",class:S("input",!!t&&"not-empty"),id:o,value:t,onChange:s}),e&&a("label",{for:o,class:"label",children:e}),a("div",{class:"underline"})]})}function vn({checked:e,onChange:t}){return a("label",{className:"switch",children:[a("input",{type:"checkbox",checked:e,onChange:t}),a("span",{className:"slider"})]})}var Ai=0;function Pi({label:e,value:t,onChange:n}){const i="input-b"+Ai++,o=y(s=>{n&&n(s.target.checked)},[n]);return a("div",{class:"input-container boolean-fld",children:[e&&a("label",{for:i,class:"label",children:e}),a(vn,{checked:t||!1,onChange:o}),a("div",{class:"underline"})]})}function De({value:e,gradient:t,backgroundImage:n,onChange:i}){const o=[t&&`linear-gradient(to right, ${t.join(",")})`,n&&`url(${n})`].filter(u=>!!u).join(","),s=t&&{backgroundImage:o},r=y(u=>{e=parseFloat(u.target.value)/1e3,i&&i(e)},[i]),l=(e*1e3).toFixed(0);return a("input",{class:"hue-range",style:s,value:l,onChange:r,type:"range",min:0,max:1e3})}const Et="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='16.0px'%20height='16.0px'%20viewBox='0%200%2016.0%2016.0'%20version='1.1'%20id='SVGRoot'%20sodipodi:docname='undef-color.svg'%20inkscape:version='1.1.2%20(0a00cf5339,%202022-02-04)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview829'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:document-units='px'%20showgrid='true'%20inkscape:zoom='49.659708'%20inkscape:cx='7.7527641'%20inkscape:cy='8.4776979'%20inkscape:window-width='2560'%20inkscape:window-height='1384'%20inkscape:window-x='1440'%20inkscape:window-y='666'%20inkscape:window-maximized='1'%20inkscape:current-layer='layer1'%3e%3cinkscape:grid%20type='xygrid'%20id='grid892'%20/%3e%3c/sodipodi:namedview%3e%3cdefs%20id='defs824'%20/%3e%3cg%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%20id='layer1'%3e%3cpath%20style='fill:none;stroke:%23ff0000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='M%202,14%2014,2'%20id='path971'%20/%3e%3cpath%20style='fill:none;stroke:%23ff0000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='M%2014,14%202,2'%20id='path1018'%20/%3e%3c/g%3e%3c/svg%3e",xi="/czml-editor/assets/checker-s-BCFT3Bev.png";function Ii({value:e,debounceTimeout:t,debouncedOnChange:n,...i}){const[o,s]=P(e);J(()=>{s(e)},[e,s]);const r=ae({value:e,timeout:null}),l=y(u=>{const c=u.target.value;s(c),r.current.value=c,r.current.timeout&&clearTimeout(r.current.timeout),r.current.timeout=setTimeout(()=>{n(r.current.value),r.current.timeout=null},t)},[s,t,n,r]);return a("input",{value:o,onChange:l,...i})}function St({value:e,label:t,alpha:n,onChange:i}){const[o,s,r]=e&&Tt(e.red,e.green,e.blue)||[0,.5,.5],[l,u]=P(o),[c,p]=P(s*100),[d,f]=P(r*100),[_,m]=P(e&&e.alpha||1),b=y(k=>{u(k*360);var A=Y.fromHsl(k,c/100,d/100);n&&(A=A.withAlpha(_)),i&&i(A)},[c,d,_,n,u,i]),g=y(k=>{p(k*100);var A=Y.fromHsl(l/360,k,d/100);n&&(A=A.withAlpha(_)),i&&i(A)},[l,d,_,n,p,i]),v=y(k=>{f(k*100);var A=Y.fromHsl(l/360,c/100,k);n&&(A=A.withAlpha(_)),i&&i(A)},[l,c,_,n,f,i]),w=y(k=>{m(k),i&&i(Y.fromHsl(l/360,c/100,d/100).withAlpha(k))},[l,c,d,m,i]),I=y(k=>{(k===""||k==="none"||k==="undefined")&&i&&i(void 0);const A=Y.fromCssColorString(k);if(A){i&&i(A);const[Q,pe,R]=Tt(A.red,A.green,A.blue);u(Q),u(pe),u(R),m(A.alpha)}},[u,p,f,m,i]),M=`hsl(${l.toFixed(0)}, 0%, ${d.toFixed(2)}%)`,X=`hsl(${l.toFixed(0)}, 100%, ${d.toFixed(2)}%)`,H=`hsl(${l.toFixed(0)}, ${c.toFixed(2)}%, 0%)`,j=`hsl(${l.toFixed(0)}, ${c.toFixed(2)}%, 50%)`,W=`hsl(${l.toFixed(0)}, ${c.toFixed(2)}%, 100%)`;var B=Y.fromHsl(l/360,c/100,d/100);n&&(B=B.withAlpha(_));const F=`hsla(${l.toFixed(0)}, ${c.toFixed(1)}%, ${d.toFixed(1)}%, 0)`,te=`hsla(${l.toFixed(0)}, ${c.toFixed(1)}%, ${d.toFixed(1)}%, 1)`,T={backgroundColor:`hsla(${l.toFixed(0)}, ${c.toFixed(2)}%, ${d.toFixed(2)}%, ${_.toFixed(3)})`};let $=B&&Math.floor(B.alpha*255).toString(16);$=`${$.length===1?"0":""}${$}`;const U=e&&(B==null?void 0:B.toCssHexString())||"none",Ae=e&&n&&!U.match(/#[\d,a-f]{8}/i)?$:"",Pe=U+Ae;return a("div",{class:"input-container color-fld button-size-s",children:[t&&a("label",{class:"label",children:t}),a("div",{class:"picker-layout",children:[a("div",{class:"picker-preview-container",children:a("div",{class:"checker",children:[e&&a("div",{class:"preview",style:T}),e===void 0&&a("div",{class:"preview-none",children:a("img",{src:Et})})]})}),a("div",{class:"picker-sliders",children:[a(De,{value:l/360,onChange:b}),a(De,{value:c/100,gradient:[M,X],onChange:g}),a(De,{value:d/100,gradient:[H,j,W],onChange:v}),n&&a(De,{value:_,gradient:[F,te],backgroundImage:xi,onChange:w})]})]}),a("div",{class:"color-text-input",children:[a(Ii,{value:Pe,debounceTimeout:500,debouncedOnChange:I}),a("button",{class:"reset-value",onClick:()=>{i&&i(void 0)},children:a("img",{src:Et})})]}),a("div",{class:"underline"})]})}function Tt(e,t,n){let i=Math.max(e,t,n),o=i-Math.min(e,t,n),s=1-Math.abs(i+i-o-1),r=o&&(i==e?(t-n)/o:i==t?2+(n-e)/o:4+(e-t)/o);return[60*(r<0?r+6:r),s?o/s:0,(i+i-o)/2]}function Di({label:e,enumObj:t,ignore:n,value:i,onChange:o}){const r=Object.entries(t||{}).filter(([u])=>!(n!=null&&n.includes(u))).map(([u,c])=>({val:c,key:u,selected:i===c})).map(u=>{const c=`${u.val}-${u.key}`,p=S("enum-fld-option",u.selected&&"selected");return a("div",{class:p,onClick:()=>{o&&o(u.val)},children:[Ei(u.key),a("span",{class:S("status",u.selected&&"selected")})]},c)}),l=S("input-container","enum-fld",i===void 0&&"val-undefined");return a("div",{class:l,children:[e&&a("label",{class:"label",children:e}),a("div",{class:"enum-fld-options",children:r}),a("div",{class:"underline"})]})}function Ei(e){return e.split("_").map(t=>t.toLowerCase()).filter(t=>!!t).join(" ")}const Si=["x","y","z","w"];function Me({label:e,value:t,size:n,targetClass:i,componentNames:o,inline:s,onChange:r}){const l=(t==null?void 0:t.length)||(o==null?void 0:o.length)||n||3,u=Array.from({length:l},(_,m)=>(t==null?void 0:t[m])||null),[c,p]=P(u),d=y((_,m)=>{const b=c.map((I,M)=>M!==_?I:m);p(b);const g=b.map(I=>Number(I)),v=g.every(I=>I!==void 0&&!isNaN(I)),w=v&&(i&&new i(...g)||g);r&&r(v?w:void 0)},[c,i,r]),f=c.map((_,m)=>{const b=(o==null?void 0:o[m])||Si[m],v=_==null?"":""+_;return a(de,{className:"component-fld",value:v,label:b,onChange:d.bind(void 0,m)},b)});return a("div",{class:S("input-container","vector-fld",s&&"inline"),children:[a("div",{children:e}),a("div",{class:S("components",s&&"inline"),children:f})]})}function pt({onFile:e,accept:t,name:n,disabled:i}){const o=ae(null),s=y(()=>{var r;for(let l of(r=o.current)==null?void 0:r.files)e&&e(l)},[e,o]);return a(G,{children:[a("button",{disabled:i,onClick:()=>{var r;(r=o.current)==null||r.click()},children:n||"Load"}),a("input",{ref:o,onChange:s,type:"file",id:"file",style:{display:"none"},multiple:!0,accept:t})]})}function Ti(e){return new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.readAsDataURL(e)})}function Mi({accept:e,className:t,children:n,onFile:i}){const o=ae(null),[s,r]=P(!1),[l,u]=P(!0);J(()=>{const p=o.current;if(!p)return;const d=b=>{b.preventDefault(),b.dataTransfer&&b.dataTransfer.files&&e&&u(Array.from(b.dataTransfer.files).every(g=>e(g))),r(!0)},f=b=>{b.preventDefault(),r(!1)},_=b=>{b.preventDefault(),r(!0)},m=b=>{if(b.preventDefault(),r(!1),b.dataTransfer&&b.dataTransfer.files)for(let g of b.dataTransfer.files)i&&i(g)};return p.addEventListener("dragenter",d),p.addEventListener("dragleave",f),p.addEventListener("dragover",_),p.addEventListener("drop",m),()=>{p.removeEventListener("dragenter",d),p.removeEventListener("dragleave",f),p.removeEventListener("dragover",_),p.removeEventListener("drop",m)}},[i,e,r,o]);const c=S("drop-zone",s&&"drag-over",!l&&"reject",t);return a("div",{ref:o,class:c,children:n})}function Oi({value:e,onChange:t}){const{resources:n,setResources:i}=V(Dn),o=y(f=>{const _=n.uploads;_.includes(f)||i({...n,uploads:[..._,f]})},[n,i]),s=y(async f=>{const _=await Ti(f);o(_)},[o]),[r,l]=P(),u=y(()=>{r&&o(r),l(void 0)},[r,l,o]),c=e instanceof ce?e.url:e,d=[...n.datasourceIcons,...n.defaultIcons,...n.uploads].map(f=>{const _=new ce(f);return a(Ri,{selected:f===c,resource:_,onClick:()=>{t&&t(f)}},f)});return a("div",{class:"icon-lib",children:[a("div",{class:"icon-lib-icons",children:d}),a(Mi,{className:"icon-drop-zone",onFile:s,children:[a("div",{children:"Drop image or click"}),a(pt,{name:"Upload image",accept:"image/*",onFile:s})]}),a("div",{style:{display:"flex"},children:[a("button",{onClick:u,children:"Load from URL"}),a(de,{className:"wide",label:"Load URL",value:r,onChange:l})]})]})}function Ri({resource:e,selected:t,onClick:n}){const i=ae(null),[o,s]=P([0,0]);J(()=>{i.current&&(i.current.onload=()=>{var u,c;s([((u=i.current)==null?void 0:u.naturalWidth)||0,((c=i.current)==null?void 0:c.naturalHeight)||0])})},[i,s]);const[r,l]=o;return a("div",{class:"icon-lib-icon-component",onClick:n,children:[a("div",{class:S("icon-lib-icon",t&&"selected"),children:a("img",{ref:i,src:e.url})}),a("div",{children:[a("span",{children:r}),a("span",{children:"x"}),a("span",{children:l})]})]})}function Li({label:e,value:t,onChange:n}){const[i,o]=P(!1),s=t instanceof ce?t.url:t;return a("div",{class:"imgurl-fld-container",children:[a("div",{class:"imgurl-fld",children:[a("div",{class:"label",children:e||"Billbord image"}),a("img",{src:s}),a("button",{class:"size-s",onClick:()=>{o(!0)},children:"Change"})]}),a(ut,{visible:i,children:[a("div",{children:a("button",{onClick:()=>{o(!1)},children:"Close"})}),a(Oi,{value:t,onChange:n})]})]})}function Ni({subject:e,property:t,onChange:n}){var _;const{name:i,type:o,title:s}=t,r=s||Ci(i),l=e[t.name],u=l!==void 0&&l instanceof nt&&!l.isConstant,c=l==null?void 0:l.valueOf();i==="text"&&console.log(l,c);const[p,d]=P(),f=y(m=>{t.type==="number"&&typeof m=="string"&&(m=m.includes(".")?parseFloat(m):parseInt(m),m=Number.isNaN(m)?void 0:m),l!==void 0&&l.setValue?l.setValue(m):t.type==="enum"?e[t.name]=new ue(m):e[t.name]=m,n&&n(m),d(m)},[e,l,t,d]);if(u)return console.log("interpolated property",l),a("div",{children:[`Cant't edit "`,t.name,'" because its values are interpolated']});switch(o){case"string":return a(de,{label:r,value:c,onChange:f});case"number":return a(de,{label:r,value:c,onChange:f});case"boolean":return a(Pi,{label:r,value:c,onChange:f});case"vector":{const{size:b,targetClass:g,componentNames:v}=t;return a(Me,{label:r,value:c,size:b,targetClass:g,componentNames:v,onChange:f})}case"distance-display-condition":{const{size:b,targetClass:g,componentNames:v}=di,w=c&&[c==null?void 0:c.near,c==null?void 0:c.far];return a(Me,{label:r,value:w,size:b,targetClass:g,componentNames:v,onChange:f})}case"near-far-scalar":{const{size:b,targetClass:g,componentNames:v}=ui,w=c&&[c==null?void 0:c.near,c==null?void 0:c.nearValue,c==null?void 0:c.far,c==null?void 0:c.farValue];return a(Me,{label:r,value:w,size:b,targetClass:g,componentNames:v,onChange:f})}case"enum":return a(Di,{label:r,value:c,enumObj:t.enum,ignore:t.ignore,onChange:f});case"color":return a(St,{label:r,value:c,alpha:t.noAlpha!==!0,onChange:f});case"material":const m=(_=c==null?void 0:c.color)==null?void 0:_.valueOf();return a(St,{label:r,value:m,alpha:t.noAlpha!==!0,onChange:f});case"image-url":return a(Li,{label:r,value:c,onChange:f});default:return console.warn(`Unsupported value type ${o} for field ${t.name}`,c),a(de,{label:r,value:c,onChange:f})}}function Hi({children:e}){const[t,n]=P(0),i=Array.isArray(e)?e:[e],o=i.map((r,l)=>{const u=r.props.title;return a("span",{class:S("tab-header",l===t&&"selected"),onClick:()=>n(l),children:u})}),s=i.map((r,l)=>a("div",{class:S("tab",l===t&&"selected"),children:r}));return a(G,{children:[a("div",{class:"tab-bar",children:o}),s]})}function Bi({children:e}){return a(G,{children:e})}function Fi({entity:e,metadata:t}){const i=(Array.isArray(t)?t:[t]).map(o=>{const s=e[o.feature];return s&&o.propertyGroups.map(r=>a(Bi,{title:r.title,children:r.properties.map(l=>a(Ni,{subject:s,property:l},`${e==null?void 0:e.id}.${o.feature}.${l.name}`))},`${e==null?void 0:e.id}.${o.feature}.${r.title}`))}).flat(1);return a("div",{class:S("feature-editor"),children:i&&a(Hi,{children:i})})}var Ge,Mt;function zi(){if(Mt)return Ge;Mt=1;const e=String.raw`[A-Za-z][^/\s>]*`,t=String.raw`\B"(?:\\[^<>\n]|[^\\"<>\n])*"(?!\w)`,n=String.raw`\B'(?:\\[^<>\n]|[^\\'<>\n])*'(?!\w)`,i=String.raw`${t}|${n}`,o=String.raw`"(?<quotedAttrValue>[^"]*)"`,s=String.raw`'(?<singleQuotedAttrValue>[^']*)'`,r=String.raw`(?<unquotedAttrValue>[^\s"'\`=<>]+)`,l=String.raw`[^=\s>/"']+(?=[=>\s]|$)`,u=String.raw`${o}|${s}|${r}`,c=String.raw`(?<attrName>${l})(?:\s*=\s*(?:${u}))?`,p=String.raw`${i}|[^\s>]*[^\s>/]|[^\s>]*/(?!\s*>)`,d=String.raw`(?<attrSpace>\s*)(?:${c}|(?<attrText>${p}))`,f={comment:String.raw`<!--.*?-->`,dtd:String.raw`<![^>]+>`,startTag:String.raw`<(?<startTagName>${e})(?<attrs>(?:${d})*)\s*(?<closingSlash>/?)\s*>`,endTag:String.raw`</(?<endTagName>${e})\s*>`,space:String.raw`\s+`,text:String.raw`[^<\s"']+|${i}|['"]`,wildcard:String.raw`.`},_=Object.entries(f).map(([v,w])=>`(?<${v}>${w})`).join("|");function*m(v,w){let I,{lastIndex:M}=v;for(;I=v.exec(w);)yield I,{lastIndex:M}=v;if(M!=w.length)throw new Error("Failed to parse string")}const b=new Set(["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"]);function g(v,w="  ",I=80){var Pe;const M=new RegExp(_,"gys"),X=new RegExp(d,"gy"),H=[];let j=null,W=0,B=0,F="",te=0,T="";const $=()=>{if(T&&T!=`
`){const Q=F.indexOf(`
`),pe=Q==-1?F.length:Q;B+T.length+pe>I&&(T=`
`)}const k=T==`
`&&F?w.repeat(te):"",A=`${T}${k}${F}`;if(A){const Q=A.lastIndexOf(`
`);Q==-1?B+=A.length:B=A.length-Q-1,H.push(A)}F=T=""},U=(...k)=>{for(const A of k)!j&&/^\s+$/.test(A)?($(),T=A):(F||(te=W),F+=A)};for(const k of m(M,v)){if(g.__strict&&k.groups.wildcard)throw new Error("Unexpected wildcard");if(k.groups.endTag){const A=k.groups.endTagName.toLowerCase();A==j&&(j=null),j||(--W,U(`</${A}>`))}if(j)U(k[0]);else if(k.groups.space)U(...((Pe=k[0].match(/\n/g))==null?void 0:Pe.slice(0,2))??[" "]);else if(k.groups.comment||k.groups.dtd||k.groups.text||k.groups.wildcard)U(k[0]);else if(k.groups.startTag){const A=k.groups.startTagName.toLowerCase();if(U(`<${A}`),++W,k.groups.attrs){let{lastIndex:pe}=X,R,xe;for(;R=X.exec(k.groups.attrs);){if({lastIndex:pe}=X,g.__strict&&R.groups.attrText)throw new Error("Unexpected attr text");R.groups.attrText?(R.groups.attrSpace&&U(/\n/.test(R.groups.attrSpace)?`
`:" "),U(R.groups.attrText)):((R.groups.attrSpace||!(xe!=null&&xe.groups.attrText))&&U(/\n/.test(R.groups.attrSpace)?`
`:" "),U(`${R.groups.attrName}${R.groups.quotedAttrValue?`="${R.groups.quotedAttrValue}"`:R.groups.singleQuotedAttrValue?`='${R.groups.singleQuotedAttrValue}'`:R.groups.unquotedAttrValue?`=${R.groups.unquotedAttrValue}`:""}`)),xe=R}if(pe!=k.groups.attrs.length)throw new Error("Failed to parse attributes")}const Q=!!k.groups.closingSlash;U(Q?" />":">"),Q||b.has(A)?--W:["pre","textarea","script","style"].includes(A)&&(j=A)}}$();let Ae=!1;for(;/^\s+$/.test(H[H.length-1]);){const k=H.pop();/\n/.test(k)&&(Ae=!0)}return Ae&&H.push(`
`),H.join("")}return g.default=g,Ge=g,Ge}var Vi=zi();const $i=Nn(Vi);function Ui({entity:e}){const[t,n]=P(!1),[i,o]=P(!1),s=V(ee),r=ae(),l=e==null?void 0:e.description,u=l==null?void 0:l.valueOf(),[c,p]=P(),d=ae(null);J(()=>{n(!1);const w=r.current;w&&(w.viewModel.showInfo=!1,w.viewModel.description=u)},[u,r,n]),J(()=>{if(s)return r.current=new Hn(s.container),r.current.viewModel.closeClicked.addEventListener(()=>{n(!1),r.current&&(r.current.viewModel.showInfo=!1)}),()=>{var w;(w=r.current)==null||w.destroy(),r.current=void 0}},[r,s,n]);const f=y(()=>{const w=!t;n(w);const I=r.current;I&&(I.viewModel.description=u,I.viewModel.showInfo=w&&u)},[u,r,t,n]),_=y(()=>{o(!0),p(u)},[u,p,o]),m=y(()=>{o(!1),p(void 0)},[p,o]),b=y(()=>{e&&(l?l.setValue(c):e.description=new ue(c)),o(!1),p(void 0)},[e,l,c,p,o]),g=y(w=>{p(w.target.value)},[e,l,p]),v=y(()=>{var M;const w=(M=d.current)==null?void 0:M.value,I=w&&Gi($i(w));e&&I&&(l?l.setValue(I):e.description=new ue(I),p(I))},[d,e,l,p]);return a("div",{class:"entity-description-fld",children:[a(ut,{visible:i,children:[a("div",{class:"editor-actions",children:[a("button",{onClick:b,children:"Save"}),a("span",{children:" "}),a("button",{onClick:m,children:"Cancel"}),a("span",{children:" "}),a("button",{onClick:v,children:"Format"})]}),a("textarea",{ref:d,class:"description-editor",onChange:g,children:c})]}),a("div",{class:"label",children:"Description"}),a("div",{class:"sescription-fld-actions button-size-s",children:[a("button",{onClick:f,children:"Preview"}),a("span",{class:"spacer",children:" "}),a("button",{onClick:_,children:"Edit"})]})]})}function Gi(e){return e&&e.split(`
`).filter(t=>!t.match(/^[\s]*$/)).join(`
`)}const ji=[{name:"height",type:"number"},{name:"extrudedHeight",type:"number"},{name:"heightReference",type:"enum",enum:N,description:Dt},{name:"extrudedHeightReference",type:"enum",enum:N,description:Dt},{name:"perPositionHeight",type:"boolean"},{name:"closeBottom",type:"boolean"},{name:"closeTop",type:"boolean"}],Wi=[{name:"fill",type:"boolean"},{name:"material",type:"material"},{name:"outline",type:"boolean"},{name:"outlineColor",type:"color"},{name:"outlineWidth",type:"number"}],Zi=[{name:"classificationType",type:"enum",enum:Ce,ignore:["NUMBER_OF_CLASSIFICATION_TYPES"]},{name:"zIndex",type:"number"},{name:"distanceDisplayCondition",type:"distance-display-condition"}],Xi={feature:"polygon",propertyGroups:[{title:"Appearance",properties:Wi},{title:"Geometry",properties:ji},{title:"Extra",properties:Zi}]},Qi=[{name:"image",type:"image-url"},{name:"width",type:"number"},{name:"height",type:"number"},{name:"sizeInMeters",type:"boolean"},{name:"horizontalOrigin",type:"enum",enum:He},{name:"verticalOrigin",type:"enum",enum:re}],Ji=[{name:"translucencyByDistance",type:"near-far-scalar"},{name:"pixelOffset",type:"vector",size:2},{name:"pixelOffsetScaleByDistance",type:"near-far-scalar"},{name:"scale",type:"number"},{name:"scaleByDistance",type:"near-far-scalar"},{name:"rotation",type:"number"},{name:"alignedAxis",type:"vector"},{name:"color",type:"color",noAlpha:!0},{name:"imageSubRegion",type:"vector",size:4,componentNames:["x","y","width","height"]},{name:"distanceDisplayCondition",type:"distance-display-condition"},{name:"disableDepthTestDistance",type:"number"}],Yi={feature:"billboard",propertyGroups:[{title:"Appearance",properties:Qi},{title:"Extra",properties:Ji}]};function Ve({label:e,checked:t,onChange:n,className:i}){return a("div",{class:S("labled-switch",i),children:[a("label",{children:e}),a(vn,{checked:!!t,onChange:()=>{n&&n(!t)}})]})}function Ki({entity:e,showData:t,setShowData:n}){const i=e.properties,o=i==null?void 0:i.getValue(),s=t&&(i==null?void 0:i.propertyNames.map(r=>a("tr",{children:[a("td",{children:r}),a("td",{children:o[r]})]},r)));return a("div",{className:S("entity-data"),children:[a("h4",{children:"Data"}),a("div",{class:S("data-empty-warning",o&&"hidden"),children:"Data is empty"}),a("div",{class:S("data-display",!o&&"hidden"),children:[a(Ve,{label:"Show data",className:"show-entity-data",checked:t,onChange:n}),a("table",{class:"data-properties-table",children:a("tbody",{children:s})})]})]})}function se(e,t){const n=e.camera.getPickRay(t);return n&&e.scene.globe.pick(n,e.scene)||e.camera.pickEllipsoid(t,e.scene.globe.ellipsoid)}function qi(e,t,n){var s,r;let i=null,o=null;if(t.position&&t.position.isConstant)i=()=>t.position.getValue(),o=l=>{t.position.setValue(l)};else if(t.polygon&&((s=t.polygon.hierarchy)!=null&&s.isConstant)){const l=t.polygon.hierarchy.getValue();i=()=>t.polygon.hierarchy.getValue().positions[0],o=(u,c,p,d)=>{t.polygon.hierarchy.setValue(Cn(l,p,d))}}else if(t.polyline&&((r=t.polyline.positions)!=null&&r.isConstant)){const l=t.polyline.positions.getValue().map(wn);i=()=>t.polyline.positions.getValue()[0],o=(u,c,p,d)=>{t.polyline.positions.setValue(l.map(f=>bn(f,p,d)).map(yn))}}if(i&&o)return e.attachToEntity(t,i,o,n)}class eo{constructor(t){x(this,"viewer");x(this,"state",null);x(this,"screenSpaceEventHandler",null);this.viewer=t}bindScreenSpaceEvents(){this.screenSpaceEventHandler||(this.screenSpaceEventHandler=new it(this.viewer.scene.canvas),this.screenSpaceEventHandler.setInputAction(this.mouseMove.bind(this),K.MOUSE_MOVE),this.screenSpaceEventHandler.setInputAction(this.mouseDown.bind(this),K.LEFT_DOWN),this.screenSpaceEventHandler.setInputAction(this.mouseUp.bind(this),K.LEFT_UP))}unBindScreenSpaceEvents(){this.screenSpaceEventHandler&&(this.screenSpaceEventHandler.destroy(),this.screenSpaceEventHandler=null)}mouseUp(t){this.state&&this.state.picked&&(this.state.onDragEnd&&this.state.onDragEnd(),this.reset())}mouseMove(t){if(this.state&&this.state.mouseDownPosition&&this.state.mouseDownEntityPosition){const n=se(this.viewer,t.endPosition);if(n){const i=z.fromCartesian(n),o=i.latitude-this.state.mouseDownPosition.latitude,s=i.longitude-this.state.mouseDownPosition.longitude,r=new z(this.state.mouseDownEntityPosition.longitude+s,this.state.mouseDownEntityPosition.latitude+o,this.state.mouseDownEntityPosition.height);this.state.newPosition(r,s,o)}}}mouseDown(t){const n=this.viewer.scene.pick(t.position);if(this.state&&n&&this.state.pick(n)){this.state.picked=!0,this.disableDefaultControls();const i=se(this.viewer,t.position);i&&(this.state.mouseDownPosition=z.fromCartesian(i),this.state.mouseDownEntityPosition=this.state.getEntityPosition())}}attachToEntity(t,n,i,o){const s={picked:!1,entity:t,initialPosition:z.fromCartesian(n()),mouseDownPosition:null,mouseDownEntityPosition:null,pick:r=>r.id===t,getEntityPosition:function(){return this.initialPosition},newPosition:function(r,...l){const u=z.toCartesian(r);i(u,r,...l)},onDragEnd:o};return this.state=s,this}disableDefaultControls(){this.viewer.scene.screenSpaceCameraController.enableInputs=!1}enableDefaultControls(){this.viewer.scene.screenSpaceCameraController.enableInputs=!0}reset(){this.state=null,this.enableDefaultControls()}}function wn(e){return z.fromCartesian(e)}function yn(e){return z.toCartesian(e)}function bn(e,t,n){return new z(e.longitude+t,e.latitude+n,e.height)}function Cn(e,t,n){var s;const i=e.positions.map(wn).map(r=>bn(r,t,n)).map(yn),o=(s=e.holes)==null?void 0:s.map(r=>Cn(r,t,n));return new Qt(i,o)}function to({entity:e,onChange:t}){const n=e.position,o=n&&n.isConstant&&n.getValue(),s=o?z.fromCartesian(o):void 0,r=Ot(s==null?void 0:s.latitude),l=Ot(s==null?void 0:s.longitude),u=s==null?void 0:s.height,c=y(p=>{const d=parseFloat(p);if(!isNaN(d)&&r&&l){const f=he.fromDegrees(l,r,d);t&&t(f)}},[r,l,t]);if(!(!r||!l))return a("div",{class:"position-fld",children:[a("div",{class:"label",children:[a("span",{children:"Latitude"}),a("span",{children:"Longitude"}),a("span",{children:"Height(m)"})]}),a("div",{class:"value",children:[a("span",{children:`${r==null?void 0:r.toFixed(6)}`}),a("span",{children:`${l==null?void 0:l.toFixed(6)}`}),a("span",{children:`${u==null?void 0:u.toFixed(3)}`})]}),a(de,{label:"height",value:""+(u==null?void 0:u.toFixed(3)),onChange:c})]})}function Ot(e){return e!==void 0?e*180/Math.PI:void 0}function no({entity:e}){const t=V(ee),n=y(()=>{e&&(t==null||t.flyTo(e,{duration:1}))},[t,e]),i=V(we).positionDragController,[o,s]=P(!1),r=y(()=>{s(!1),i&&(i.reset(),i==null||i.unBindScreenSpaceEvents(),i==null||i.enableDefaultControls())},[i,e,s]),l=y(()=>{s(!0),i&&(qi(i,e,r),i.bindScreenSpaceEvents())},[i,e,r]),u=y(p=>{i&&e&&(p?l():r())},[l,r]),c=y(p=>{e.position&&e.position.isConstant&&e.position.setValue(p)},[e]);return a("div",{class:"entity-position",children:[a("h4",{children:[a("span",{children:"Position"})," ",a("button",{onClick:n,class:"fly-to-button",children:"Flyto"})]}),a(to,{entity:e,onChange:c}),a(Ve,{checked:o,onChange:u,label:"Drag to move"})]})}const io=[{name:"text",type:"string"},{name:"pixelOffset",type:"vector",size:2,targetClass:Jt},{name:"fillColor",type:"color"},{name:"outlineWidth",type:"number"},{name:"outlineColor",type:"color"},{name:"style",type:"enum",enum:Yt},{name:"horizontalOrigin",type:"enum",enum:He},{name:"verticalOrigin",type:"enum",enum:re},{name:"font",type:"string"},{name:"scale",type:"number"},{name:"heightReference",type:"enum",enum:N}],oo=[{name:"showBackground",type:"boolean"},{name:"backgroundColor",type:"color"},{name:"backgroundPadding",type:"vector",size:2,targetClass:Jt},{name:"scaleByDistance",type:"near-far-scalar"},{name:"translucencyByDistance",type:"near-far-scalar"},{name:"pixelOffsetScaleByDistance",type:"near-far-scalar"},{name:"distanceDisplayCondition",type:"distance-display-condition"}],so={feature:"label",propertyGroups:[{title:"Label",properties:io},{title:"Label Extra",properties:oo}]},ro=[{name:"width",type:"number"},{name:"material",type:"material"},{name:"clampToGround",type:"boolean"},{name:"distanceDisplayCondition",type:"distance-display-condition"},{name:"classificationType",type:"enum",enum:Ce,ignore:["NUMBER_OF_CLASSIFICATION_TYPES"]}],ao={feature:"polyline",propertyGroups:[{title:"Polyline properties",properties:ro}]};function lo({entity:e,onChange:t}){var s,r;const[n,i]=P((r=(s=e==null?void 0:e.label)==null?void 0:s.show)==null?void 0:r.getValue()),o=y(l=>{var u,c;if(e){if(!e.label&&l){if(!e.position&&e.polygon){const p=(u=e.polygon.hierarchy)==null?void 0:u.getValue().boundingSphere.center;e.position=new We(p)}if(!e.position&&e.polyline){const p=(c=e.polyline.positions)==null?void 0:c.getValue()[0];e.position=new We(p)}e.label=new Ze({show:!0,text:e.name})}if(e.label){const p=e.label.show;if(p&&p.isConstant)p.setValue(l);else if(p===void 0)e.label.show=new ue(l);else return;i(l),t&&t(e)}}},[e,t,i]);return a(Ve,{label:"Show label",checked:n,onChange:o})}function co({entity:e,onChange:t}){var u;const[n,i]=P(!1),o=(u=V(we))==null?void 0:u.geometryEditor,s=y(()=>{if(o){const c=e.polygon?"polygon":"polyline";o.editEntity(c,e),i(!0)}},[e,o,i]),r=y(()=>{o==null||o.cancel(),i(!1)},[o,i]),l=y(()=>{o==null||o.save(),t&&t(e),i(!1)},[o,i]);return a("div",{class:S("edit-geometry","button-size-s"),children:[!n&&a("button",{onClick:s,children:"Edit geometry"}),n&&a("button",{onClick:l,children:"Save"}),n&&a("button",{onClick:r,children:"Cancel"})]})}const uo=[{name:"scale",type:"number"},{name:"minimumPixelSize",type:"number"},{name:"maximumScale",type:"number"}],po=[{name:"color",type:"color"},{name:"colorBlendMode",type:"enum",enum:Kt},{name:"colorBlendAmount",type:"number"},{name:"silhouetteColor",type:"color"},{name:"silhouetteSize",type:"number"}],ho=[{name:"runAnimations",type:"boolean"},{name:"clampAnimations",type:"boolean"},{name:"shadows",type:"enum",enum:ke,ignore:["NUMBER_OF_SHADOW_MODES"]},{name:"heightReference",type:"enum",enum:N},{name:"distanceDisplayCondition",type:"distance-display-condition"}],fo={feature:"model",propertyGroups:[{title:"Scale & Display",properties:uo},{title:"Color",properties:po},{title:"Extra",properties:ho}]};function _o({entity:e,onChange:t}){var l,u;const n=e.orientation,i=(n==null?void 0:n.isConstant)&&n.getValue(),o=((l=e.position)==null?void 0:l.isConstant)&&((u=e.position)==null?void 0:u.getValue()),s=o&&i&&go(o,i),r=y(c=>{if(o){const p=mo(o,c);n?n.isConstant&&n.setValue(p):e.orientation=new ue(p)}},[e,o,n,t]);if(e.model)return a("div",{children:[a("h4",{children:"Orientation"}),a(Me,{targetClass:Bn,size:3,inline:!0,componentNames:["heading","pitch","roll"],value:s,onChange:r})]})}function mo(e,t){return qt.headingPitchRollQuaternion(e,t)}function go(e,t){const n=Fn.fromQuaternion(t),i=zn.fromRotationTranslation(n,e);return qt.fixedFrameToHeadingPitchRoll(i)}function ht({header:e,id:t,className:n,children:i}){return a("div",{id:t,class:S("section",n),children:[a("h3",{children:a("span",{children:e})}),i]})}function Rt({id:e,className:t,children:n}){return a("div",{id:e,class:S("subsection",t),children:n})}function vo({entity:e,onChange:t}){var m,b;const[n,i]=P(!1),[o,s]=P(e==null?void 0:e.name),r=y(g=>{e&&(e.name=g,t&&t(e),s(g))},[e,t,s]),l=e==null?void 0:e.billboard,u=(b=(m=e==null?void 0:e.label)==null?void 0:m.show)==null?void 0:b.getValue(),c=e==null?void 0:e.model,p=e==null?void 0:e.polyline,d=e==null?void 0:e.polygon,f=d||p,_=[l&&Yi,p&&ao,d&&Xi,c&&fo,u&&so].filter(g=>!!g);return e?a(ht,{id:"entity-editor",header:"Selected Entity",children:[a(Rt,{children:[a(de,{label:"Entity name",value:e.name,onChange:r},`${e.id}.name`),a(no,{entity:e},`${e.id}.position`),f&&a(co,{entity:e,onChange:t}),a(_o,{entity:e,onChange:t}),a(lo,{entity:e,onChange:t}),a(Ui,{entity:e}),a(Ki,{entity:e,showData:n,setShowData:i})]},e.id+".subsection-common"),a(Rt,{children:[a("h4",{children:"Styling properties"}),a(Fi,{entity:e,metadata:_})]},e.id+".subsection-styling")]}):null}function wo({onLoad:e}){const t=V(ee),n=y((s,r)=>{const l=s.entities.values;e(l,s,r)},[e]),i=y((s,r)=>{t&&(t.dataSources.add(s),s.then(l=>n(l,r)))},[t,n]),o=y(s=>{/vnd.google-earth/.test(s.type)||/\.kmz|\.kml/.test(s.name)?i(Vn.load(s),s):/\.czml/.test(s.name)?Lt(s).then(r=>{const l=JSON.parse(r);yo(l),i($n.load(l),s)}):s.type==="application/geo+json"?Lt(s).then(r=>{i(Un.load(JSON.parse(r)),s)}):console.log("Unknown filetype",s)},[i]);return a(pt,{name:"Load Document",accept:".kml, .kmz, .json, .czml, .czmz, .geojson",onFile:o})}function Lt(e){const t=new FileReader,n=new Promise(i=>{t.onload=function(){i(t.result)}});return t.readAsText(e),n}function yo(e){let t=0;e.forEach(n=>{if(n.billboard&&n.billboard.image&&n.billboard.image.reference&&n.billboard.image.reference.split("#")[0]===n.id){console.warn("Self-referencing reference for billboard image",n);const s=new Gn;n.billboard.image=s.fromText(""+ ++t,Y.fromRandom({alpha:1}),32).toDataURL()}})}function Nt(e,t,n){const i=e[n];return i!==void 0&&i instanceof nt&&i.isConstant?{...t,[n]:i.valueOf()}:t}function kn(e){const t=jn.WGS84.cartesianToCartographic(e),n=_t.toDegrees(t.longitude),i=_t.toDegrees(t.latitude);return[n,i,t.height]}function bo(e){return e&&e instanceof he?{cartographicDegrees:kn(e)}:null}function Co(e){return e&&e instanceof ft?{unitQuaternion:ft.pack(e,[],0)}:null}function h(e,t,n,i){if(e!==void 0&&e.isConstant){const o=e.valueOf();if(i){const s=i(o);s!==void 0&&(t[n]=s)}else t[n]=o}}function Le(e,t,n,i){var o;if(e)if(e instanceof en){const s=(o=e.color)==null?void 0:o.valueOf();s&&s instanceof Y&&(t[n]={solidColor:{color:Z(s)}})}else if(e instanceof Wn){const s={};h(e.image,s,"image",$e(i)),h(e.color,s,"color",Z),h(e.repeat,s,"repeat",Ne),h(e.transparent,s,"transparent",Z),t[n]={image:s}}else console.log("Unsupported material property",n,e)}function ko(e){var t=0,n,i;for(n=0;n<e.length;n++)i=e.charCodeAt(n),t=(t<<5)-t+i,t|=0;return t}function Ao(e,t,n){const i=ko(e),o=t[i];return o?{reference:o}:(t[i]=n,e)}function An(e,t){const n=t&&t.resourceCache,i=t&&t.id,o=t&&t.separateResources;return s=>{if(s instanceof ot)return`${s.targetId}#${s.targetPropertyNames.join(".")}`;if(s instanceof ce){let r=s.url;return(s.isDataUri||/^data:/.test(r))&&n&&e?o?(n[e]=r,e):Ao(r,n,`${i}#${e}`):r}}}var $e=e=>An(e,void 0);function E(e){return t=>Object.keys(e).find(n=>e[n]===t)}function fe(e){return{nearFarScalar:[e.near,e.nearValue,e.far,e.farValue]}}function Z(e){return{rgbaf:[e.red,e.green,e.blue,e.alpha]}}function Po(e){return{boundingRectangle:[e.x,e.y,e.width,e.height]}}function ve(e){return{distanceDisplayCondition:[e.near,e.far]}}function Pn(e){return xn(e.positions)}function xo(e){if(e.holes)return e.holes.map(Pn)}function Ne(e){return{cartesian2:[e.x,e.y]}}function et(e){return{cartesian:[e.x,e.y,e.z]}}function xn(e){return{cartographicDegrees:(e instanceof nt?e.getValue():e).map(i=>kn(i)).flat(1)}}function Io(e){return{wsen:[e.west,e.south,e.east,e.north]}}function Do(e){return console.warn("Node transformations are not supported"),null}function Eo(e){return console.warn("Articulations are not supported"),null}function So(e){const t={};var n=e.image;return n instanceof ot&&(n=n.resolvedProperty),h(n,t,"image",$e("billboard.image")),h(e.scale,t,"scale"),h(e.pixelOffset,t,"pixelOffset",Ne),h(e.eyeOffset,t,"eyeOffset",et),h(e.horizontalOrigin,t,"horizontalOrigin",E(He)),h(e.verticalOrigin,t,"verticalOrigin",E(re)),h(e.heightReference,t,"heightReference",E(N)),h(e.color,t,"color",Z),h(e.rotation,t,"rotation"),h(e.alignedAxis,t,"alignedAxis",et),h(e.sizeInMeters,t,"sizeInMeters"),h(e.width,t,"width"),h(e.height,t,"height"),h(e.scaleByDistance,t,"scaleByDistance",fe),h(e.translucencyByDistance,t,"translucencyByDistance",fe),h(e.pixelOffsetScaleByDistance,t,"pixelOffsetScaleByDistance",fe),h(e.imageSubRegion,t,"imageSubRegion",Po),h(e.distanceDisplayCondition,t,"distanceDisplayCondition",ve),h(e.disableDepthTestDistance,t,"disableDepthTestDistance"),t}function To(e){const t={};return e.hierarchy instanceof ue?(h(e.hierarchy,t,"positions",Pn),h(e.hierarchy,t,"holes",xo)):console.warn("polygon.hierarchy is not ConstantProperty"),h(e.arcType,t,"arcType",E(tn)),h(e.height,t,"height"),h(e.heightReference,t,"heightReference",E(N)),h(e.extrudedHeight,t,"extrudedHeight"),h(e.extrudedHeightReference,t,"extrudedHeightReference",E(N)),h(e.stRotation,t,"stRotation"),h(e.granularity,t,"granularity"),h(e.fill,t,"fill"),Le(e.material,t,"material","polygon"),h(e.outline,t,"outline"),h(e.outlineColor,t,"outlineColor",Z),h(e.outlineWidth,t,"outlineWidth"),h(e.perPositionHeight,t,"perPositionHeight"),h(e.closeTop,t,"closeTop"),h(e.closeBottom,t,"closeBottom"),h(e.shadows,t,"shadows",E(ke)),h(e.distanceDisplayCondition,t,"distanceDisplayCondition",ve),h(e.classificationType,t,"classificationType",E(Ce)),h(e.zIndex,t,"zIndex"),t}function Mo(e){const t={};return h(e.coordinates,t,"coordinates",Io),h(e.height,t,"height"),h(e.heightReference,t,"heightReference",E(N)),h(e.extrudedHeight,t,"extrudedHeight"),h(e.extrudedHeightReference,t,"extrudedHeightReference",E(N)),h(e.rotation,t,"rotation"),h(e.stRotation,t,"stRotation"),h(e.granularity,t,"granularity"),h(e.fill,t,"fill"),Le(e.material,t,"material","rectangle"),h(e.outline,t,"outline"),h(e.outlineColor,t,"outlineColor",Z),h(e.outlineWidth,t,"outlineWidth"),h(e.shadows,t,"shadows",E(ke)),h(e.distanceDisplayCondition,t,"distanceDisplayCondition",ve),h(e.classificationType,t,"classificationType",E(Ce)),h(e.zIndex,t,"zIndex"),t}function Oo(e){const t={};return h(e.positions,t,"positions",xn),h(e.arcType,t,"arcType",E(tn)),h(e.width,t,"width"),h(e.granularity,t,"granularity"),Le(e.material,t,"material","polyline"),h(e.shadows,t,"shadows",E(ke)),Le(e.depthFailMaterial,t,"depthFailMaterial","polyline"),h(e.distanceDisplayCondition,t,"distanceDisplayCondition",ve),h(e.clampToGround,t,"clampToGround"),h(e.classificationType,t,"classificationType",E(Ce)),h(e.zIndex,t,"zIndex"),t}function Ro(e){const t={};return h(e.uri,t,"gltf",$e("model.gltf")),h(e.scale,t,"scale"),h(e.minimumPixelSize,t,"minimumPixelSize"),h(e.maximumScale,t,"maximumScale"),h(e.incrementallyLoadTextures,t,"incrementallyLoadTextures"),h(e.runAnimations,t,"runAnimations"),h(e.shadows,t,"shadows",E(ke)),h(e.heightReference,t,"heightReference",E(N)),h(e.silhouetteColor,t,"silhouetteColor",Z),h(e.silhouetteSize,t,"silhouetteSize"),h(e.color,t,"color",Z),h(e.colorBlendMode,t,"colorBlendMode",E(Kt)),h(e.colorBlendAmount,t,"colorBlendAmount"),h(e.distanceDisplayCondition,t,"distanceDisplayCondition",ve),h(e.nodeTransformations,t,"nodeTransformations",Do),h(e.articulations,t,"articulations",Eo),t}function Lo(e){const t={};return h(e.uri,t,"uri"),h(e.maximumScreenSpaceError,t,"maximumScreenSpaceError"),t}function No(e){const t={};return h(e.text,t,"text"),h(e.font,t,"font"),h(e.style,t,"style",E(Yt)),h(e.scale,t,"scale"),h(e.showBackground,t,"showBackground"),h(e.backgroundColor,t,"backgroundColor",Z),h(e.backgroundPadding,t,"backgroundPadding",Ne),h(e.pixelOffset,t,"pixelOffset",Ne),h(e.eyeOffset,t,"eyeOffset",et),h(e.horizontalOrigin,t,"horizontalOrigin",E(He)),h(e.verticalOrigin,t,"verticalOrigin",E(re)),h(e.heightReference,t,"heightReference",E(N)),h(e.fillColor,t,"fillColor",Z),h(e.outlineColor,t,"outlineColor",Z),h(e.outlineWidth,t,"outlineWidth"),h(e.translucencyByDistance,t,"translucencyByDistance",fe),h(e.pixelOffsetScaleByDistance,t,"pixelOffsetScaleByDistance",fe),h(e.scaleByDistance,t,"scaleByDistance",fe),h(e.distanceDisplayCondition,t,"distanceDisplayCondition",ve),h(e.disableDepthTestDistance,t,"disableDepthTestDistance"),t}class Ho{constructor(t){x(this,"separateResources");x(this,"resourceCache",{});x(this,"counter",0);x(this,"document",{id:"document",version:"1.0"});x(this,"packets",[]);this.separateResources=(t==null?void 0:t.separateResources)||!0}addEntity(t){const n=t.id||`object${this.counter++}`;var i={id:n};if(i=Nt(t,i,"name"),i=Nt(t,i,"description"),t.parent&&(i={...i,parent:t.parent.id}),t.position){const s=t.position;s.isConstant?i={...i,position:bo(s.getValue())}:console.warn("Not Supported")}if(t.orientation){const s=t.orientation;s.isConstant?i={...i,orientation:Co(s.getValue())}:console.warn("Not Supported")}const o={id:n,resourceCache:this.resourceCache,separateResources:this.separateResources};$e=s=>An(s,o),t.billboard&&(i.billboard=So(t.billboard)),t.polyline&&(i.polyline=Oo(t.polyline)),t.polygon&&(i.polygon=To(t.polygon)),t.rectangle&&(i.rectangle=Mo(t.rectangle)),t.model&&(i.model=Ro(t.model)),t.tileset&&(i.tileset=Lo(t.tileset)),t.label&&(i.label=No(t.label)),t.parent&&(i={...i,parent:t.parent.id}),this.packets.push(i)}toJSON(){return[this.document,...this.packets]}async listResources(){const t=[];for(let n of Object.keys(this.resourceCache)){const i=await fetch(this.resourceCache[n]).then(o=>o.blob());t.push({name:n,lastModified:new Date,input:i})}return t}}function Bo({entities:e,onExport:t}){const n=y(()=>{const o=new nn("export");e.forEach(s=>o.entities.add(s)),Zn({entities:o.entities}).then(s=>{const l="data:application/vnd.google-earth.kml+xml;charset=utf-8,"+encodeURIComponent(s.kml);Ht(l,"document.kml")})},[e,t]),i=y(()=>{const o=new Ho({separateResources:!1});e.forEach(r=>o.addEntity(r));const s="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o.toJSON()));Ht(s,"document.czml")},[e,t]);return a("div",{class:"export",children:[a("button",{onClick:n,children:"Download as KML"}),a("button",{onClick:i,children:"Download as CZML"})]})}function Ht(e,t){const n=document.createElement("A");n.href=e,n.download=t,n.click(),n.remove()}function Fo({entities:e,onLoad:t}){const[n,i]=P(!1);return J(()=>{const o=e.length>0&&!n;return window.onbeforeunload=s=>{!new URLSearchParams(window.location.search).has("noprompt")&&o&&s.preventDefault()},()=>{window.onbeforeunload=null}},[e,n]),a(ht,{header:"Import / Export",className:"upload-section",children:[a(wo,{onLoad:t}),a(Bo,{entities:e,onExport:()=>{i(!0)}})]})}function Bt({type:e,active:t,onEntityCreated:n,disabled:i,setActiveType:o}){const s=V(ee),r=V(we).geometryEditor,[l,u]=P(!1),c=y(()=>{if(r){const f=r.save();f&&n(f),u(!1),o&&o(void 0)}},[r,u,n]),p=y(()=>{if(s&&r){const f=r.newEntity(e);f&&s.entities.add(f),u(!0),o&&o(e)}},[e,u,o,s,r]),d=y(()=>{if(s&&r){const f=r.cancel();f&&s.entities.remove(f)}u(!1),o&&o(void 0)},[u,o,s,r]);return a(G,{children:[t&&a("div",{children:["Click in a 3d map view to add points to ",e," geometry.",e==="polygon"&&a("div",{children:" You need at least 3 points for polygon."}),e==="polyline"&&a("div",{children:" You need at least 2 points for polyline."})]}),!l&&a("button",{disabled:i===!0,onClick:p,children:["Add ",e==="polygon"?"Polygon":"Polyline"]}),l&&a("button",{onClick:c,children:"Save"}),l&&a("button",{onClick:d,children:"Cancel"})]})}var _e=(e=>(e[e.billboard=0]="billboard",e[e.model=1]="model",e[e.label=2]="label",e[e.point=3]="point",e))(_e||{});class zo{constructor(t){x(this,"viewer");x(this,"screenSpaceEventHandler");x(this,"inputMode",null);x(this,"billboardProperties",{image:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png",verticalOrigin:re.BOTTOM,heightReference:N.RELATIVE_TO_GROUND,width:32,height:32,disableDepthTestDistance:1e9});x(this,"labelProperties",{text:"Label Text",verticalOrigin:re.BOTTOM,heightReference:N.RELATIVE_TO_GROUND,disableDepthTestDistance:1e9});x(this,"modelProperties",{heightReference:N.RELATIVE_TO_GROUND});x(this,"modelUri",null);x(this,"newEntityEvent",new Xn);this.viewer=t,this.screenSpaceEventHandler=new it(t.scene.canvas)}handleClick(t){if(this.inputMode===0){this.inputMode=null;const n=se(this.viewer,t.position);if(n){const i=this.createBillboard(n);this.handleNewEntity(i)}}else if(this.inputMode===1){this.inputMode=null;const n=se(this.viewer,t.position);if(n&&this.modelUri){const i=this.createModel(n);this.handleNewEntity(i)}this.modelUri=null}else if(this.inputMode===2){this.inputMode=null;const n=se(this.viewer,t.position);if(n){const i=this.createLabel(n);this.handleNewEntity(i)}}}createBillboard(t){return new oe({position:t,billboard:{...this.billboardProperties}})}createLabel(t){return new oe({position:t,label:{...this.labelProperties}})}createModel(t){const n=this.modelUri;return new oe({position:t,model:{uri:n,...this.modelProperties}})}handleNewEntity(t){this.newEntityEvent.raiseEvent(t)}subscribeToEvents(){this.screenSpaceEventHandler.setInputAction(this.handleClick.bind(this),K.LEFT_CLICK)}unSubscribeToEvents(){this.screenSpaceEventHandler.removeInputAction(K.LEFT_CLICK)}}function Vo({active:e,disabled:t,setActiveType:n}){const i=y(()=>{n(_e.billboard)},[n]),o=y(()=>{n(void 0)},[n]);return a(G,{children:[e&&a("div",{children:"Click in a map view to create billboard"}),!e&&a("button",{disabled:t,onClick:i,children:"Add Billboard"}),e&&a("button",{onClick:o,children:"Cancel"})]})}function $o({active:e,disabled:t,setActiveType:n}){const i=V(we).clickCreateController,o=y(r=>{i&&(n(_e.model),i.modelUri=URL.createObjectURL(r))},[i,n]),s=y(()=>{n(void 0)},[n]);return a(G,{children:[!e&&a(pt,{disabled:t,name:"Add model",onFile:o,accept:".gltf, .glb"}),e&&a("div",{children:"Click in a map view to set model position"}),e&&a("button",{onClick:s,children:"Cancel"})]})}function Uo({onEntityCreated:e}){const[t,n]=P(),i=V(we).clickCreateController,o=V(ee),s=y(g=>{if(n(g),!!i&&(g===void 0||Object.values(_e).includes(g))){const v=g===void 0?null:g;i.inputMode=v,v!==null?i.subscribeToEvents():i.unSubscribeToEvents()}},[i,n]),r=y(g=>{n(void 0),i&&(i.inputMode=null,i.unSubscribeToEvents()),o&&o.entities.add(g),e(g)},[i,o,n,e]);J(()=>{if(i)return i.newEntityEvent.addEventListener(r),()=>{i.newEntityEvent.removeEventListener(r)}},[i,r]);const l=t===_e.billboard,u=t==="polygon",c=t==="polyline",p=t===_e.model,d=t===void 0,f=!d&&!l,_=!d&&!c,m=!d&&!u,b=!d&&!p;return a(ht,{id:"create-entity",className:"create-section",header:"Create entities",children:a("div",{class:S("creation-actions",t!==void 0&&"active",t!==void 0&&`${t}`),children:[!f&&a(Vo,{active:l,disabled:f,setActiveType:s}),!_&&a(Bt,{type:"polyline",active:c,disabled:_,setActiveType:s,onEntityCreated:e}),!m&&a(Bt,{type:"polygon",active:u,disabled:m,setActiveType:s,onEntityCreated:e}),!b&&a($o,{active:p,disabled:!d,setActiveType:s})]})})}const Go=new URLSearchParams(window.location.search);Jn.defaultApiKey=Go.get("google_key")||"AIzaSyCgjboUOBS_g9VjVZnTaRTg9dvfHDiZJ4k";function jo(e){Qn().then(t=>{e.scene.primitives.add(t),e.scene.globe.show=!1}).catch(t=>{console.log(`Failed to load tileset: ${t}`)})}function Wo(e){e.scene.primitives._primitives.filter(t=>t._basePath&&t._basePath.startsWith("https://tile.googleapis.com/")).forEach(t=>{e.scene.primitives.remove(t)}),e.scene.globe.show=!0}function Zo(){const[e,t]=P(!1),n=V(ee),i=y(()=>{const o=!e;t(o),n&&(o?jo(n):Wo(n))},[n,e,t]);return a(Ve,{label:"Use google 3d",checked:e,onChange:i})}const Xo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAC4jAAAuIwF4pT92AAAF90lEQVR4Xu2bS4/jRBSFb/N+jEDADAjEIgKJYcWS/79mOStAAmUxAgHdIJB4gxp/qTrJrfJ1bCf2tJ3hSDV2exK7zrmPKtetmD3luKovzI3b29v79bUaV1dX1/W1uTCrAI7sW+5yrwANvAA3/DOXKJMLUJHWuY6vNe3NfH4MPzbtl3wu4hwnF2MyATJxWZpzmgi/n6+/2rTX8zl42Z3/7s5/btqv+fyxHQSBuMjfTCHEc/WFsQgsTttYIi3CEEWMl/I18EI+evyVj5D/wxLp9+wgCGJsLYvQPHv34XOEOEsAZ/WaOJ1+xw6EIcuR571iyfOetTb+bRqsfmvaP5ZII4oE4b7c3wtxjRCninByCDQPfWjdxBEF0lgf4pB90dLznrd+/G1JiD8tiYIAeAFikAe+a9o3VgnRiPAFXx6D0R5QWf2Dpn1iJfE3LN1XLj+EcA19R2GCiNyPkOD+PIfnySMe8aEcEqNywygBHPmP7WD1D5v2tqWOYfFziHeBe9G4L6FAvxGHv5VISbbbpn0+JiQGCxCQJwQ+ytce2DzEa3gheJ5CjHMlVzBYhEECBOQ/teSC71rqBAJEWX0uSAjyCtCz/RA7SIReAXrIE4MoP6fVjwHihJ+3Pv0TekXoFcCWS17g+fSD/giFCFZOrQscFcANdRtLMe/J37Oe7z9BIAL98SLQX6B5QjhEdhLIrq+hjmxPwvOW7/zuHYH+1J7A/IFpNHzC4TEkUY31jPMMdfytrHvXbt8FhQP9ZNJEv8HuPSLKB6EAGXJ9FCXRkOlpSyUv0D/6CfAAXrI25t4mPZ6pL1TWx/WJeyY5jLVPcqg7B/ST/tJv+g+PHa/Mb4/IA0R+Y8n6cn0mH2sC/VUowGNj5drCDoUHOHUi6y/d9WvQ38gLPM92CFjb+njJ2qwv0G/6Dw95QRECtQB17CuW1mZ9QV4AjyIX6AN7Ady4rxcLxdBarS94Hnpxuq8wqD0A8Fqp8X7JY/5QaG6g+UGxKOsF8O7POzZuEy1brRHwgA+8ijCIPAAoDPS6uXbAQ+5foBbAxz/Z8+Q1w4UBHhrNCiF2EyGXAH38s3q79vgX4AEfnwdIhDe1B3hcivWFkE+XAJeUAAUlwgKRAL5cdYko+EUCPFX4X4D6gpVV2ktEwS8SAPAOTU3ukgAfeBXoEgCk2vPlIOSzEyAvFNJYQVUtnhI1VdpLADzgoyozPKkmX9cewOqpavHU50PVVgh4wAde8NP2m84QkBDU5y8B8CiIC14AlowJg8eWMuUlJUIlQHjBb79EHnmAzwO0tecB+i8uiv899gK4ROjzAF/guGZ4HgqDXQLkP2sP8GHAPhzchi+s1QvoN/2HB3wK9we1AIAPbC1tQuKDyp5rhEYzeMBna1WpvBDAFQ69F/xk6/QCWZ/+e+sXBdKoNCb32Nq66wOK/dr6RYG0JQDqUEa2gxdQUdHaOouLrUWFBUK5q7Z+a49ASwAH5QItk7OeBiiVL9kTcP0fcvveOmJfCAWovOBRvqwS05ILJhrz5fpfWep/aH0QCgCyCKqhsYoqDwCExT078v07ANke8lj826Z9acn1vzY37tc4SoCNRdkTtvmS34eHCEvxBFle5Il7NkVtLZEPN0iBowJk4EpsNRP8FrQliBCR/8zytlkLtsV49Arg8kGXCHjFA7ub0YFsT7Ij5kPyXa4v9AoAOkR4mI9aZiJJzr1XWMDqjPMMdQiAlYl5uf0g8mCQAKBDBFyPrWgc59wtLnjiWJ1xnqGObE/C29oI8mCwAKASgQfo1ZL3bDqGN5CNue+UQnji3B/i/ocTDHW7bM/1oeTBKAFAvrmEAHRqY+1fjGAhFVoX+4uRsGA4FLmqrI0V2lzlhVA5WhMoBD/nN0MhcRtpdY+zBABuy1kkhMrRTKUVEppQRaOGEqoI412El1aoWsT58KnkwdkCCM4bgN9wxSwSMYAEEXyh0ldsRBhAmlyzW8nJDZxsdY/JBBACjwA6SpA+iDAQyUksXmNyATwqMQRdOwZPcHLSHrMKEMGJ0om5yEb4D1gsLPtR6hv3AAAAAElFTkSuQmCC",ne=Y.AQUAMARINE,Ft={image:Xo,width:32,height:32,scale:.4,heightReference:N.CLAMP_TO_GROUND,disableDepthTestDistance:1e6,color:ne},L=class L{constructor(t){x(this,"viewer");x(this,"entity",null);x(this,"_oldGeometry");x(this,"createMode");x(this,"_activeControlPoint",null);x(this,"_controlPoints",[]);x(this,"_middlePoints",[]);x(this,"_type",null);x(this,"_entityGeometryProperty",null);x(this,"entityOptions");x(this,"screenSpaceEventHandler",null);x(this,"_mouseDownPosition",null);x(this,"_mouseDownEntityPosition",null);this.viewer=t,this.createMode=!1,L.controlPointsDisplay||(L.controlPointsDisplay=new nn("geometry-control-points"),t.dataSources.add(L.controlPointsDisplay)),this._createScreenSpaceEventHandler()}newEntity(t){this._type=t,this._setTypeOptions(),this.createMode=!0;const n=new mt(this._geometryCallback.bind(this),!1);return this._entityGeometryProperty&&(this.entity=new oe({[this._type]:{[this._entityGeometryProperty]:n,...this.entityOptions}})),this.entity}editEntity(t,n){return this._type=t,this._setTypeOptions(),this.createMode=!1,this.entity=n,this._oldGeometry=this._getGeometryPropertyValue(),this._geometryAsControlPoints(),this.entity[this._type][this._entityGeometryProperty]=new mt(this._geometryCallback.bind(this),!1),this.entity}_getGeometryPropertyValue(){var t,n;if(this.entity){if(this._type==="polyline"){const i=this.entity[this._type];return i&&((t=i.positions)==null?void 0:t.getValue())}else if(this._type==="polygon"){const i=this.entity[this._type];return i&&((n=i.hierarchy)==null?void 0:n.getValue())}}}_geometryAsControlPoints(){this._type==="polyline"?this._getGeometryPropertyValue().forEach(n=>{this._addControlPoint(n)}):this._type==="polygon"&&this._getGeometryPropertyValue().positions.forEach(n=>{this._addControlPoint(n)}),this._createMiddlePoints()}_geometryCallback(){const t=this._controlPoints.map(n=>{var i;return(i=n.position)==null?void 0:i.getValue()});if(this._type==="polyline")return t;if(this._type==="polygon")return new Qt(t)}_createMiddlePoints(){this._middlePoints.forEach(n=>{L.controlPointsDisplay.entities.remove(n)});let t=null;this._controlPoints.forEach(n=>{t&&this._addMiddlePoint(t,n),t=n}),this._type==="polygon"&&t&&this._addMiddlePoint(t,this._controlPoints[0])}save(){const t=this.entity;return this.entity[this._type][this._entityGeometryProperty]=new ue(this._geometryCallback()),this.reset(),t}cancel(){const t=this.entity;return this._oldGeometry&&(this.entity[this._type][this._entityGeometryProperty]=this._oldGeometry),this.reset(),t}disableDefaultControls(){this.viewer&&(this.viewer.scene.screenSpaceCameraController.enableInputs=!1)}enableDefaultControls(){this.viewer&&(this.viewer.scene.screenSpaceCameraController.enableInputs=!0)}reset(){this.entity=null,this._type=null,this._oldGeometry=null,this._activeControlPoint=null,this._entityGeometryProperty=null,L.controlPointsDisplay.entities.removeAll(),this._controlPoints=[],this._middlePoints=[]}destroy(){this.screenSpaceEventHandler&&this.screenSpaceEventHandler.destroy()}_setTypeOptions(){this._type==="polyline"?(this._entityGeometryProperty="positions",this.entityOptions={clampToGround:!0,width:3,material:ne}):this._type==="polygon"&&(this._entityGeometryProperty="hierarchy",this.entityOptions={height:0,material:new en(ne.withAlpha(.3)),outline:!0,outlineColor:ne,outlineWidth:2})}_addMiddlePoint(t,n,i){const o=this._getEntityColor(),s=new oe({position:new Yn(()=>{var p,d;const l=(p=t.position)==null?void 0:p.getValue(),u=(d=n.position)==null?void 0:d.getValue();return he.midpoint(l,u,new he)},!1),billboard:{...Ft,scale:.3,color:o}}),r=i===void 0?this._middlePoints.length:i;this._middlePoints.splice(r,0,s),L.controlPointsDisplay.entities.add(s)}_addControlPoint(t,n){const i=this._getEntityColor(),o=new oe({position:t,billboard:{...Ft,color:i}}),s=n===void 0?this._controlPoints.length:n;return this._controlPoints.splice(s,0,o),L.controlPointsDisplay.entities.add(o),o}_removeCP(t){const n=this._controlPoints.indexOf(t);if(n<0)return;let i=this._middlePoints[n-1],o=this._middlePoints[n];if(this._type==="polygon"&&n-1<0&&(i=this._middlePoints[this._middlePoints.length-1]),i&&(this._middlePoints=this._middlePoints.filter(s=>s!==i),L.controlPointsDisplay.entities.remove(i)),o&&(this._middlePoints=this._middlePoints.filter(s=>s!==o),L.controlPointsDisplay.entities.remove(o)),i&&o){const s=this._controlPoints[n-1]||this._controlPoints[this._controlPoints.length-1],r=this._controlPoints[n+1]||this._controlPoints[0];n-1<0?this._addMiddlePoint(s,r):this._addMiddlePoint(s,r,n-1)}L.controlPointsDisplay.entities.remove(t),this._controlPoints.splice(n,1)}_getEntityColor(){var t,n,i,o,s,r,l,u,c;if(!this.entity)return ne;if(this._type==="polygon"){const p=(i=(n=(t=this.entity)==null?void 0:t.polygon)==null?void 0:n.material)==null?void 0:i.getValue();return((r=(s=(o=this.entity)==null?void 0:o.polygon)==null?void 0:s.outlineColor)==null?void 0:r.getValue())||p||ne}else if(this._type==="polyline")return((c=(u=(l=this.entity)==null?void 0:l.polyline)==null?void 0:u.material)==null?void 0:c.getValue().color)||ne;return ne}_mouseClick(t){var o;let n=(o=this.viewer)==null?void 0:o.scene.pick(t.position);const i=this.viewer&&se(this.viewer,t.position);if(this.entity){if(n){const s=this._controlPoints.includes(n.id),r=this._middlePoints.includes(n.id);if(s&&this._controlPoints.length>(this._type==="polygon"?3:2)&&confirm("Delete point?")&&this._removeCP(n.id),s||r)return}if(i&&this.createMode){const s=this._controlPoints[this._controlPoints.length-1],r=this._addControlPoint(i);if(s&&r){if(this._type==="polygon"){const l=this._middlePoints[this._middlePoints.length-1];L.controlPointsDisplay.entities.remove(l),this._middlePoints.splice(this._middlePoints.length-1,1)}this._addMiddlePoint(s,r),this._type==="polygon"&&this._addMiddlePoint(r,this._controlPoints[0])}}return}}_mouseMove(t){if(this._mouseDownPosition&&this._activeControlPoint){const n=this.viewer&&se(this.viewer,t.endPosition);if(!n)return;let i=z.fromCartesian(n),o=i.latitude-this._mouseDownPosition.latitude,s=i.longitude-this._mouseDownPosition.longitude,r=new z(this._mouseDownEntityPosition.longitude+s,this._mouseDownEntityPosition.latitude+o,this._mouseDownEntityPosition.height);const l=z.toCartesian(r);this._activeControlPoint.position=new We(l)}}_mouseDown(t){var l;const n=(l=this.viewer)==null?void 0:l.scene.pick(t.position);if(!n)return;const i=n.id,o=this._controlPoints.includes(i),s=this._middlePoints.findIndex(u=>u.id===(i==null?void 0:i.id)),r=s>=0;if(o||r){const u=this.viewer&&se(this.viewer,t.position);if(!u)return;if(this._mouseDownPosition=z.fromCartesian(u),this._mouseDownEntityPosition=z.fromCartesian(i.position.getValue()),console.log(`Down on ${o?"CP":""}${r?"MP":""}`,i),this.disableDefaultControls(),this._activeControlPoint=i,r){const c=s%this._controlPoints.length,p=(s+1)%this._controlPoints.length;console.log("middlePointIndex",s,c,p);const d=this._controlPoints[c],f=this._controlPoints[p];this._activeControlPoint=this._addControlPoint(i.position.getValue(),s+1),this._middlePoints.splice(s,1),this._addMiddlePoint(d,this._activeControlPoint,s),this._addMiddlePoint(f,this._activeControlPoint,s+1),L.controlPointsDisplay.entities.remove(i)}}}_mouseUp(){this._mouseDownPosition=null,this._mouseDownEntityPosition=null,this.enableDefaultControls()}_createScreenSpaceEventHandler(){this.viewer&&(this.screenSpaceEventHandler=new it(this.viewer.scene.canvas),this.screenSpaceEventHandler.setInputAction(this._mouseDown.bind(this),K.LEFT_DOWN),this.screenSpaceEventHandler.setInputAction(this._mouseMove.bind(this),K.MOUSE_MOVE),this.screenSpaceEventHandler.setInputAction(this._mouseUp.bind(this),K.LEFT_UP),this.screenSpaceEventHandler.setInputAction(this._mouseClick.bind(this),K.LEFT_CLICK))}__labels(){this._controlPoints.forEach((t,n)=>{t.label=new Ze({text:"cp"+n,eyeOffset:new he(0,0,-25),verticalOrigin:re.BOTTOM})}),this._middlePoints.forEach((t,n)=>{t.label=new Ze({text:"mp"+n,eyeOffset:new he(0,0,-25),verticalOrigin:re.BOTTOM})})}};x(L,"controlPointsDisplay");let tt=L;const In={uploads:[],defaultIcons:[],datasourceIcons:[]};function Qo(e){const t=new Map;for(var n of e)if(n.billboard){const i=n.billboard.image;if(i!=null&&i.isConstant&&!(i instanceof ot)){const o=i.getValue(),s=Jo(o);if(s){const r=t.get(s.url)||[];t.set(s.url,[...r,n.id])}}}return t}function Jo(e){if(e instanceof ce)return e;if(typeof e=="string"||e instanceof String)return new ce(e);if(e instanceof HTMLCanvasElement)return new ce(e.toDataURL());console.warn("Unknow type of imgage property value, value is",e)}const we=ct({}),Dn=ct({resources:In,setResources:e=>{}});function Yo(){const e=V(ee),t=dt(()=>({geometryEditor:e?new tt(e):void 0,clickCreateController:e?new zo(e):void 0,positionDragController:e?new eo(e):void 0}),[e]),[n,i]=P([]),[o,s]=P(null),[r,l]=P(In),u=y(d=>{const f=[...n,...d],_=Array.from(Qo(f).keys());i(f),l({...r,datasourceIcons:_})},[n,i,r,l]),c=y(d=>{s(d),console.log("select entity",d)},[s]),p=y(d=>{console.log("Entity created",d),i([...n,d]),s(d)},[n,i,s]);return a("div",{id:"editor",class:"section entity-editor",children:a(we,{value:t,children:[a(Fo,{entities:n,onLoad:u}),a(Zo,{}),a(Dn,{value:{resources:r,setResources:l},children:[a(Uo,{onEntityCreated:p}),a(bi,{entities:n,entity:o,selectEntity:c}),a(vo,{entity:o,onChange:c})]})]})})}function Ko(e,t){for(var n in t)e[n]=t[n];return e}function zt(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function Vt(e,t){this.props=e,this.context=t}(Vt.prototype=new q).isPureReactComponent=!0,Vt.prototype.shouldComponentUpdate=function(e,t){return zt(this.props,e)||zt(this.state,t)};var $t=C.__b;C.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),$t&&$t(e)};var qo=C.__e;C.__e=function(e,t,n,i){if(e.then){for(var o,s=t;s=s.__;)if((o=s.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}qo(e,t,n,i)};var Ut=C.unmount;function En(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=Ko({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return En(i,t,n)})),e}function Sn(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return Sn(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function je(){this.__u=0,this.o=null,this.__b=null}function Tn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ee(){this.i=null,this.l=null}C.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Ut&&Ut(e)},(je.prototype=new q).__c=function(e,t){var n=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var o=Tn(i.__v),s=!1,r=function(){s||(s=!0,n.__R=null,o?o(l):l())};n.__R=r;var l=function(){if(!--i.__u){if(i.state.__a){var u=i.state.__a;i.__v.__k[0]=Sn(u,u.__c.__P,u.__c.__O)}var c;for(i.setState({__a:i.__b=null});c=i.o.pop();)c.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(r,r)},je.prototype.componentWillUnmount=function(){this.o=[]},je.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=En(this.__b,n,i.__O=i.__P)}this.__b=null}var o=t.__a&&Je(G,null,e.fallback);return o&&(o.__u&=-33),[Je(G,null,t.__a?null:e.children),o]};var Gt=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(Ee.prototype=new q).__a=function(e){var t=this,n=Tn(t.__v),i=t.l.get(e);return i[0]++,function(o){var s=function(){t.props.revealOrder?(i.push(o),Gt(t,e,i)):o()};n?n(s):s()}},Ee.prototype.render=function(e){this.i=null,this.l=new Map;var t=Re(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Ee.prototype.componentDidUpdate=Ee.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Gt(e,n,t)})};var es=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ts=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ns=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,is=/[A-Z0-9]/g,os=typeof document<"u",ss=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};q.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(q.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var jt=C.event;function rs(){}function as(){return this.cancelBubble}function ls(){return this.defaultPrevented}C.event=function(e){return jt&&(e=jt(e)),e.persist=rs,e.isPropagationStopped=as,e.isDefaultPrevented=ls,e.nativeEvent=e};var cs={enumerable:!1,configurable:!0,get:function(){return this.class}},Wt=C.vnode;C.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,i=t.type,o={},s=i.indexOf("-")===-1;for(var r in n){var l=n[r];if(!(r==="value"&&"defaultValue"in n&&l==null||os&&r==="children"&&i==="noscript"||r==="class"||r==="className")){var u=r.toLowerCase();r==="defaultValue"&&"value"in n&&n.value==null?r="value":r==="download"&&l===!0?l="":u==="translate"&&l==="no"?l=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?r="ondblclick":u!=="onchange"||i!=="input"&&i!=="textarea"||ss(n.type)?u==="onfocus"?r="onfocusin":u==="onblur"?r="onfocusout":ns.test(r)&&(r=u):u=r="oninput":s&&ts.test(r)?r=r.replace(is,"-$&").toLowerCase():l===null&&(l=void 0),u==="oninput"&&o[r=u]&&(r="oninputCapture"),o[r]=l}}i=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Re(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),i=="select"&&o.defaultValue!=null&&(o.value=Re(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",cs)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=es,Wt&&Wt(e)};var Zt=C.__r;C.__r=function(e){Zt&&Zt(e),e.__c};var Xt=C.diffed;C.diffed=function(e){Xt&&Xt(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function ds({sidebar:e,mainArea:t}){const[n,i]=P(window.innerWidth*.25);function o(s){const r=s.clientX,l=n;function u(p){const d=l+p.clientX-r;i(d)}function c(){window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",c)}window.addEventListener("mousemove",u),window.addEventListener("mouseup",c)}return a("div",{id:"main-layout",class:"resizable-horizontal-layout",children:[a("div",{id:"sidebar",class:"left-side-area",style:{width:`${n}px`},children:e}),a("div",{class:"resize-bar",onMouseDown:o}),a("div",{id:"main-area",class:"right-side-area",children:t})]})}const ee=ct(null);function us(){const[e,t]=P(null);return J(()=>{e==null&&t(new Kn("cesiumContainer",{animation:!1,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!0,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,scene3DOnly:!0,shouldAnimate:!0}))},[e,t]),a(ds,{sidebar:a(ee,{value:e,children:a(Yo,{})}),mainArea:a("div",{id:"cesiumContainer"})})}oi(a(us,{}),document.getElementById("app"));
